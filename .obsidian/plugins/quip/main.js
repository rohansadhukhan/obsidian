/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => QuipPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian8 = require("obsidian");

// src/quipapi.ts
var import_obsidian2 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  hostname: "platform.quip.com",
  token: "",
  removeYAML: true,
  addLink: true,
  inlineEmbeds: true,
  prependTitle: false
};
var QuipSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Quip API settings" });
    new import_obsidian.Setting(containerEl).setName("Personal API Token").setDesc("Obtained from /dev/token on your Quip website").addText((text) => text.setValue(this.plugin.settings.token).onChange(async (value) => {
      this.plugin.settings.token = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("API hostname").setDesc("Endpoint for calls to the Quip automation API").addText((text) => text.setPlaceholder("platform.quip.com").setValue(this.plugin.settings.hostname).onChange(async (value) => {
      this.plugin.settings.hostname = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h2", { text: "Publishing to Quip" });
    new import_obsidian.Setting(containerEl).setName("Remove YAML front matter").setDesc("Strip leading YAML out of notes before sending to Quip").addToggle((toggle) => toggle.setValue(this.plugin.settings.removeYAML).onChange(async (value) => {
      this.plugin.settings.removeYAML = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Add Quip link").setDesc("Insert a link to the published Quip document into YAML front matter").addToggle((toggle) => toggle.setValue(this.plugin.settings.addLink).onChange(async (value) => {
      this.plugin.settings.addLink = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Inline embedded notes").setDesc("Replace embed-links with the content of those notes").addToggle((toggle) => toggle.setValue(this.plugin.settings.inlineEmbeds).onChange(async (value) => {
      this.plugin.settings.inlineEmbeds = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Document title").setDesc("Add Note name as Quip Document title").addToggle((toggle) => toggle.setValue(this.plugin.settings.prependTitle).onChange(async (value) => {
      this.plugin.settings.prependTitle = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("em", {
      text: "Note that Quip does not expose any API to update a title of an existing document, so renaming a note will NOT change the document title in Quip."
    });
  }
};

// src/quipapi.ts
var QuipAPIClient = class {
  constructor(hostname, token) {
    this.accessToken = token;
    this.hostname = hostname;
    if (token === DEFAULT_SETTINGS.token) {
      throw new Error("Quip API token has not been set");
    } else if (hostname == DEFAULT_SETTINGS.hostname) {
      throw new Error("Quip API hostname has not been set");
    }
  }
  async newHTMLDocument(html, title) {
    const options = {
      content: html,
      format: "html" /* HTML */
    };
    if (title) {
      options.title = title;
    }
    return this.newDocument(options);
  }
  async getDocumentHTML(threadIdOrSecretPath) {
    var _a;
    let result = "";
    const options = {
      threadIdOrSecretPath
    };
    do {
      const response = await this.getThreadHTML(options);
      result += response.html;
      options.cursor = (_a = response.response_metadata) == null ? void 0 : _a.next_cursor;
    } while (options.cursor);
    return result;
  }
  async updateHTMLDocument(link, html) {
    const secret_path = link.split(".com/", 2).at(1).split("/").at(0);
    const marker = "QUIP-OBSIDIAN-DELETE-MARKER-" + Date.now();
    const prepend_html = `${html}
        <h1>${marker}</h1>
        <p><em>Everything after the <strong>${marker}</strong> h1 should be deleted shortly. Due to Quip limitations, we need to delete each h1 header separately.</em></p>`;
    const current_html = (await this.prependHTML(secret_path, prepend_html)).html;
    const dom = (0, import_obsidian2.sanitizeHTMLToDom)(current_html);
    const promises = [];
    let marker_found = false;
    const section_headers = dom.querySelectorAll("h1");
    for (const section_header of Array.from(section_headers)) {
      if (section_header.getText() == marker) {
        marker_found = true;
        console.debug(`Found deletion marker: ${section_header.getText()}`);
      } else if (marker_found) {
        console.debug(`Deleting h1 header: ${section_header.getText()}`);
        promises.push(this.deleteSection(secret_path, section_header.getAttr("id")));
      }
    }
    const responses = await Promise.all(promises);
    responses.push(await this.deleteDocumentRange(secret_path, marker));
    return Promise.resolve(responses);
  }
  async getThreadHTML(options) {
    let url = `/2/threads/${options.threadIdOrSecretPath}/html`;
    if (options.cursor) {
      url += `?cursor=${options.cursor}`;
    }
    return this.api(url, null);
  }
  async appendHTML(secret_path, html) {
    const options = {
      thread_id: secret_path,
      location: "0" /* APPEND */,
      content: html
    };
    return this.editDocument(options);
  }
  async prependHTML(secret_path, html) {
    const options = {
      thread_id: secret_path,
      location: "1" /* PREPEND */,
      content: html
    };
    return this.editDocument(options);
  }
  async deleteDocumentRange(secret_path, document_range) {
    const options = {
      thread_id: secret_path,
      location: "9" /* DELETE_DOCUMENT_RANGE */,
      document_range
    };
    return this.editDocument(options);
  }
  async deleteSection(secret_path, section_id) {
    const options = {
      thread_id: secret_path,
      location: "5" /* DELETE_SECTION */,
      section_id
    };
    return this.editDocument(options);
  }
  async editDocument(options) {
    return this.api("/1/threads/edit-document", options);
  }
  async getBlob(path) {
    const url = `/1${path}`;
    const resource = this.buildRequest(url, null);
    const response = await (0, import_obsidian2.requestUrl)(resource);
    const status = response.status;
    if (status >= 400) {
      switch (status) {
        case 401:
          throw new Error("Quip authorization failed");
        case 404:
          throw new Error(`Document not found in Quip: ${url}`);
        default:
          throw new Error(`Quip server error: ${status}: ${response.text}`);
      }
    }
    return new Blob([response.arrayBuffer], {
      type: response.headers["Content-Type"] || "image/png"
    });
  }
  async getRecentThreads() {
    const url = "/1/threads/recent?count=50";
    return this.api(url, null);
  }
  async getThread(thread_id_or_secret_path) {
    const url = `/2/threads/${thread_id_or_secret_path}`;
    return this.api(url, null);
  }
  async newDocument(options) {
    return this.api("/1/threads/new-document", options);
  }
  async searchTitles(query) {
    const url = `/1/threads/search?only_match_titles=true&query=${encodeURIComponent(query)}`;
    return this.api(url, null);
  }
  buildRequest(path, postArguments) {
    const options = {
      url: `https://${this.hostname}${path}`,
      headers: {},
      throw: false
    };
    if (this.accessToken) {
      options.headers["Authorization"] = `Bearer ${this.accessToken}`;
    }
    if (postArguments) {
      options.method = "POST" /* POST */;
      options.body = new URLSearchParams(postArguments).toString();
      options.contentType = "application/x-www-form-urlencoded";
    }
    return options;
  }
  async api(path, postArguments) {
    const resource = this.buildRequest(path, postArguments);
    const response = (0, import_obsidian2.requestUrl)(resource);
    const status = (await response).status;
    if (status >= 400) {
      switch (status) {
        case 401:
          throw new Error("Quip authorization failed");
        case 404:
          throw new Error(`Document not found in Quip: ${path}`);
        default:
          throw new Error(`Quip server error: ${status}: ${await response.text}`);
      }
    }
    return response.json;
  }
};

// src/renderer.ts
var import_obsidian3 = require("obsidian");
var mimeTypeTable = {
  bmp: "image/x-ms-bmp",
  gif: "image/gif",
  jpeg: "image/jpeg",
  jpg: "image/jpeg",
  png: "image/png",
  svg: "image/svg+xml",
  tif: "image/tiff",
  tiff: "image/tiff",
  webp: "image/webp"
};
async function postProcessRenderedHTML(plugin, inputFile, wrapper, parentFiles = []) {
  var _a;
  const vault = plugin.app.vault;
  for (const anchor of Array.from(wrapper.querySelectorAll("a.internal-link"))) {
    const link = anchor.getAttribute("data-href");
    const file = plugin.app.metadataCache.getFirstLinkpathDest((0, import_obsidian3.getLinkpath)(link), inputFile.path);
    if (file && file instanceof import_obsidian3.TFile) {
      await plugin.app.fileManager.processFrontMatter(file, (front_matter) => {
        const quip = (0, import_obsidian3.parseFrontMatterEntry)(front_matter, "quip");
        if (quip) {
          anchor.setAttribute("href", quip);
        }
      });
    }
  }
  for (const span of Array.from(wrapper.querySelectorAll('span[src$=".png"], span[src$=".jpg"], span[src$=".gif"], span[src$=".jpeg"]'))) {
    const img = createEl("img", {
      "attr": { "src": span.getAttr("src") },
      "cls": span.className
    });
    span.replaceWith(img);
  }
  if (plugin.settings.inlineEmbeds) {
    for (const span of Array.from(wrapper.querySelectorAll("img.internal-embed"))) {
      const src = span.getAttribute("src");
      if (src) {
        const subfolder = inputFile.parent;
        const file = plugin.app.metadataCache.getFirstLinkpathDest(src, subfolder.path);
        try {
          const bytes = await vault.readBinary(file);
          const type = (_a = mimeTypeTable[file.extension]) != null ? _a : "image/jpeg";
          const encoded = Buffer.from(bytes).toString("base64");
          span.setAttribute("src", `data:${type};base64,${encoded}`);
        } catch (e) {
          console.error("Quip plugin encountered an error trying to load an embedded image: " + e.toString());
        }
      }
    }
    for (const span of Array.from(wrapper.querySelectorAll("span.internal-embed"))) {
      const src = span.getAttribute("src");
      if (src) {
        const subfolder = inputFile.parent;
        const file = plugin.app.metadataCache.getFirstLinkpathDest(src, subfolder.path);
        try {
          if (parentFiles.indexOf(file.path) !== -1) {
            span.outerHTML = `<a href="${file}">${span.innerHTML}</a>`;
          } else {
            const markdown = await vault.read(file);
            const newParentFiles = [...parentFiles];
            newParentFiles.push(inputFile.path);
            const html = await render(plugin, { data: markdown }, file, newParentFiles);
            span.outerHTML = html;
          }
        } catch (e) {
          console.error("Quip plugin encountered an error trying to load an embedded note: " + e.toString());
        }
      }
    }
  }
  if (plugin.settings.removeYAML) {
    Array.from(wrapper.querySelectorAll(".frontmatter, .frontmatter-container")).forEach((el) => wrapper.removeChild(el));
  }
}
async function render(plugin, view, inputFile, parentFiles = []) {
  const markdown = view.data;
  const wrapper = document.createElement("div");
  wrapper.style.display = "hidden";
  document.body.appendChild(wrapper);
  const sourcePath = inputFile.parent.path;
  await import_obsidian3.MarkdownRenderer.renderMarkdown(markdown, wrapper, sourcePath, view);
  await postProcessRenderedHTML(plugin, inputFile, wrapper, parentFiles);
  const html = wrapper.innerHTML;
  document.body.removeChild(wrapper);
  return html;
}

// src/ImportModal.ts
var import_obsidian4 = require("obsidian");
var ImportModal = class extends import_obsidian4.SuggestModal {
  constructor(app, quip, cached_recent, onSubmit) {
    super(app);
    this.quip = quip;
    this.onSubmit = onSubmit;
    this.setPlaceholder("Quip title or URL");
    this.recent = [];
    this.loadRecentThreads(cached_recent);
    this.emptyStateText = "Loading recent documents from Quip";
    this.searching = false;
  }
  async loadRecentThreads(cached_recent) {
    this.recent = await cached_recent;
    this.emptyStateText = "No matching document found";
    if (this.isOpen) {
      this.onInput(this.inputEl.value);
    }
  }
  async loadSearchResults(query) {
    this.searching = true;
    this.searchQuery = query;
    this.searchResults = [];
    for (const thread_response of await this.quip.searchTitles(query)) {
      const thread_info = thread_response.thread;
      this.searchResults.push(thread_info);
    }
    this.searching = false;
    if (this.isOpen) {
      this.onInput(this.inputEl.value);
    }
  }
  getSuggestions(query) {
    if (query) {
      const lower_query = query.toLowerCase();
      const filter = (thread) => thread.link.toLowerCase().contains(lower_query) || (thread == null ? void 0 : thread.title.toLowerCase().contains(lower_query));
      if (this.searchQuery && lower_query.contains(this.searchQuery.toLowerCase())) {
        const filtered_results = this.searchResults.filter(filter);
        if (filtered_results.length > 0) {
          return filtered_results;
        }
      }
      const filtered_recent = this.recent.filter(filter);
      if (filtered_recent.length > 0) {
        return filtered_recent;
      } else {
        if (query && query != this.searchQuery && !this.searching) {
          this.loadSearchResults(query);
        }
        return [{ link: query }];
      }
    } else {
      return this.recent;
    }
  }
  renderSuggestion(thread, el) {
    el.createEl("div", { text: thread.title });
    el.createEl("small", { text: thread.link });
  }
  onChooseSuggestion(thread, evt) {
    if (thread.link) {
      this.onSubmit(thread.link);
    }
  }
};

// src/SuccessModal.ts
var import_obsidian5 = require("obsidian");
var SuccessModal = class extends import_obsidian5.Modal {
  constructor(app, link, message) {
    super(app);
    this.link = link;
    this.message = message;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h3", null, (el) => {
      el.innerText = "Successfully published to ";
      el.createEl("a", null, (anchor) => {
        anchor.href = this.link;
        anchor.innerText = this.link;
      });
    });
    if (this.message) {
      contentEl.createEl("p", null, (el) => {
        el.innerText = this.message;
      });
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};

// src/Importer.ts
var import_obsidian7 = require("obsidian");

// node_modules/turndown/lib/turndown.browser.es.js
function extend(destination) {
  for (var i = 1; i < arguments.length; i++) {
    var source = arguments[i];
    for (var key in source) {
      if (source.hasOwnProperty(key))
        destination[key] = source[key];
    }
  }
  return destination;
}
function repeat(character, count) {
  return Array(count + 1).join(character);
}
function trimLeadingNewlines(string) {
  return string.replace(/^\n*/, "");
}
function trimTrailingNewlines(string) {
  var indexEnd = string.length;
  while (indexEnd > 0 && string[indexEnd - 1] === "\n")
    indexEnd--;
  return string.substring(0, indexEnd);
}
var blockElements = [
  "ADDRESS",
  "ARTICLE",
  "ASIDE",
  "AUDIO",
  "BLOCKQUOTE",
  "BODY",
  "CANVAS",
  "CENTER",
  "DD",
  "DIR",
  "DIV",
  "DL",
  "DT",
  "FIELDSET",
  "FIGCAPTION",
  "FIGURE",
  "FOOTER",
  "FORM",
  "FRAMESET",
  "H1",
  "H2",
  "H3",
  "H4",
  "H5",
  "H6",
  "HEADER",
  "HGROUP",
  "HR",
  "HTML",
  "ISINDEX",
  "LI",
  "MAIN",
  "MENU",
  "NAV",
  "NOFRAMES",
  "NOSCRIPT",
  "OL",
  "OUTPUT",
  "P",
  "PRE",
  "SECTION",
  "TABLE",
  "TBODY",
  "TD",
  "TFOOT",
  "TH",
  "THEAD",
  "TR",
  "UL"
];
function isBlock(node) {
  return is(node, blockElements);
}
var voidElements = [
  "AREA",
  "BASE",
  "BR",
  "COL",
  "COMMAND",
  "EMBED",
  "HR",
  "IMG",
  "INPUT",
  "KEYGEN",
  "LINK",
  "META",
  "PARAM",
  "SOURCE",
  "TRACK",
  "WBR"
];
function isVoid(node) {
  return is(node, voidElements);
}
function hasVoid(node) {
  return has(node, voidElements);
}
var meaningfulWhenBlankElements = [
  "A",
  "TABLE",
  "THEAD",
  "TBODY",
  "TFOOT",
  "TH",
  "TD",
  "IFRAME",
  "SCRIPT",
  "AUDIO",
  "VIDEO"
];
function isMeaningfulWhenBlank(node) {
  return is(node, meaningfulWhenBlankElements);
}
function hasMeaningfulWhenBlank(node) {
  return has(node, meaningfulWhenBlankElements);
}
function is(node, tagNames) {
  return tagNames.indexOf(node.nodeName) >= 0;
}
function has(node, tagNames) {
  return node.getElementsByTagName && tagNames.some(function(tagName) {
    return node.getElementsByTagName(tagName).length;
  });
}
var rules = {};
rules.paragraph = {
  filter: "p",
  replacement: function(content) {
    return "\n\n" + content + "\n\n";
  }
};
rules.lineBreak = {
  filter: "br",
  replacement: function(content, node, options) {
    return options.br + "\n";
  }
};
rules.heading = {
  filter: ["h1", "h2", "h3", "h4", "h5", "h6"],
  replacement: function(content, node, options) {
    var hLevel = Number(node.nodeName.charAt(1));
    if (options.headingStyle === "setext" && hLevel < 3) {
      var underline = repeat(hLevel === 1 ? "=" : "-", content.length);
      return "\n\n" + content + "\n" + underline + "\n\n";
    } else {
      return "\n\n" + repeat("#", hLevel) + " " + content + "\n\n";
    }
  }
};
rules.blockquote = {
  filter: "blockquote",
  replacement: function(content) {
    content = content.replace(/^\n+|\n+$/g, "");
    content = content.replace(/^/gm, "> ");
    return "\n\n" + content + "\n\n";
  }
};
rules.list = {
  filter: ["ul", "ol"],
  replacement: function(content, node) {
    var parent = node.parentNode;
    if (parent.nodeName === "LI" && parent.lastElementChild === node) {
      return "\n" + content;
    } else {
      return "\n\n" + content + "\n\n";
    }
  }
};
rules.listItem = {
  filter: "li",
  replacement: function(content, node, options) {
    content = content.replace(/^\n+/, "").replace(/\n+$/, "\n").replace(/\n/gm, "\n    ");
    var prefix = options.bulletListMarker + "   ";
    var parent = node.parentNode;
    if (parent.nodeName === "OL") {
      var start = parent.getAttribute("start");
      var index = Array.prototype.indexOf.call(parent.children, node);
      prefix = (start ? Number(start) + index : index + 1) + ".  ";
    }
    return prefix + content + (node.nextSibling && !/\n$/.test(content) ? "\n" : "");
  }
};
rules.indentedCodeBlock = {
  filter: function(node, options) {
    return options.codeBlockStyle === "indented" && node.nodeName === "PRE" && node.firstChild && node.firstChild.nodeName === "CODE";
  },
  replacement: function(content, node, options) {
    return "\n\n    " + node.firstChild.textContent.replace(/\n/g, "\n    ") + "\n\n";
  }
};
rules.fencedCodeBlock = {
  filter: function(node, options) {
    return options.codeBlockStyle === "fenced" && node.nodeName === "PRE" && node.firstChild && node.firstChild.nodeName === "CODE";
  },
  replacement: function(content, node, options) {
    var className = node.firstChild.getAttribute("class") || "";
    var language = (className.match(/language-(\S+)/) || [null, ""])[1];
    var code = node.firstChild.textContent;
    var fenceChar = options.fence.charAt(0);
    var fenceSize = 3;
    var fenceInCodeRegex = new RegExp("^" + fenceChar + "{3,}", "gm");
    var match;
    while (match = fenceInCodeRegex.exec(code)) {
      if (match[0].length >= fenceSize) {
        fenceSize = match[0].length + 1;
      }
    }
    var fence = repeat(fenceChar, fenceSize);
    return "\n\n" + fence + language + "\n" + code.replace(/\n$/, "") + "\n" + fence + "\n\n";
  }
};
rules.horizontalRule = {
  filter: "hr",
  replacement: function(content, node, options) {
    return "\n\n" + options.hr + "\n\n";
  }
};
rules.inlineLink = {
  filter: function(node, options) {
    return options.linkStyle === "inlined" && node.nodeName === "A" && node.getAttribute("href");
  },
  replacement: function(content, node) {
    var href = node.getAttribute("href");
    var title = cleanAttribute(node.getAttribute("title"));
    if (title)
      title = ' "' + title + '"';
    return "[" + content + "](" + href + title + ")";
  }
};
rules.referenceLink = {
  filter: function(node, options) {
    return options.linkStyle === "referenced" && node.nodeName === "A" && node.getAttribute("href");
  },
  replacement: function(content, node, options) {
    var href = node.getAttribute("href");
    var title = cleanAttribute(node.getAttribute("title"));
    if (title)
      title = ' "' + title + '"';
    var replacement;
    var reference;
    switch (options.linkReferenceStyle) {
      case "collapsed":
        replacement = "[" + content + "][]";
        reference = "[" + content + "]: " + href + title;
        break;
      case "shortcut":
        replacement = "[" + content + "]";
        reference = "[" + content + "]: " + href + title;
        break;
      default:
        var id = this.references.length + 1;
        replacement = "[" + content + "][" + id + "]";
        reference = "[" + id + "]: " + href + title;
    }
    this.references.push(reference);
    return replacement;
  },
  references: [],
  append: function(options) {
    var references = "";
    if (this.references.length) {
      references = "\n\n" + this.references.join("\n") + "\n\n";
      this.references = [];
    }
    return references;
  }
};
rules.emphasis = {
  filter: ["em", "i"],
  replacement: function(content, node, options) {
    if (!content.trim())
      return "";
    return options.emDelimiter + content + options.emDelimiter;
  }
};
rules.strong = {
  filter: ["strong", "b"],
  replacement: function(content, node, options) {
    if (!content.trim())
      return "";
    return options.strongDelimiter + content + options.strongDelimiter;
  }
};
rules.code = {
  filter: function(node) {
    var hasSiblings = node.previousSibling || node.nextSibling;
    var isCodeBlock = node.parentNode.nodeName === "PRE" && !hasSiblings;
    return node.nodeName === "CODE" && !isCodeBlock;
  },
  replacement: function(content) {
    if (!content)
      return "";
    content = content.replace(/\r?\n|\r/g, " ");
    var extraSpace = /^`|^ .*?[^ ].* $|`$/.test(content) ? " " : "";
    var delimiter = "`";
    var matches = content.match(/`+/gm) || [];
    while (matches.indexOf(delimiter) !== -1)
      delimiter = delimiter + "`";
    return delimiter + extraSpace + content + extraSpace + delimiter;
  }
};
rules.image = {
  filter: "img",
  replacement: function(content, node) {
    var alt = cleanAttribute(node.getAttribute("alt"));
    var src = node.getAttribute("src") || "";
    var title = cleanAttribute(node.getAttribute("title"));
    var titlePart = title ? ' "' + title + '"' : "";
    return src ? "![" + alt + "](" + src + titlePart + ")" : "";
  }
};
function cleanAttribute(attribute) {
  return attribute ? attribute.replace(/(\n+\s*)+/g, "\n") : "";
}
function Rules(options) {
  this.options = options;
  this._keep = [];
  this._remove = [];
  this.blankRule = {
    replacement: options.blankReplacement
  };
  this.keepReplacement = options.keepReplacement;
  this.defaultRule = {
    replacement: options.defaultReplacement
  };
  this.array = [];
  for (var key in options.rules)
    this.array.push(options.rules[key]);
}
Rules.prototype = {
  add: function(key, rule) {
    this.array.unshift(rule);
  },
  keep: function(filter) {
    this._keep.unshift({
      filter,
      replacement: this.keepReplacement
    });
  },
  remove: function(filter) {
    this._remove.unshift({
      filter,
      replacement: function() {
        return "";
      }
    });
  },
  forNode: function(node) {
    if (node.isBlank)
      return this.blankRule;
    var rule;
    if (rule = findRule(this.array, node, this.options))
      return rule;
    if (rule = findRule(this._keep, node, this.options))
      return rule;
    if (rule = findRule(this._remove, node, this.options))
      return rule;
    return this.defaultRule;
  },
  forEach: function(fn) {
    for (var i = 0; i < this.array.length; i++)
      fn(this.array[i], i);
  }
};
function findRule(rules3, node, options) {
  for (var i = 0; i < rules3.length; i++) {
    var rule = rules3[i];
    if (filterValue(rule, node, options))
      return rule;
  }
  return void 0;
}
function filterValue(rule, node, options) {
  var filter = rule.filter;
  if (typeof filter === "string") {
    if (filter === node.nodeName.toLowerCase())
      return true;
  } else if (Array.isArray(filter)) {
    if (filter.indexOf(node.nodeName.toLowerCase()) > -1)
      return true;
  } else if (typeof filter === "function") {
    if (filter.call(rule, node, options))
      return true;
  } else {
    throw new TypeError("`filter` needs to be a string, array, or function");
  }
}
function collapseWhitespace(options) {
  var element = options.element;
  var isBlock2 = options.isBlock;
  var isVoid2 = options.isVoid;
  var isPre = options.isPre || function(node2) {
    return node2.nodeName === "PRE";
  };
  if (!element.firstChild || isPre(element))
    return;
  var prevText = null;
  var keepLeadingWs = false;
  var prev = null;
  var node = next(prev, element, isPre);
  while (node !== element) {
    if (node.nodeType === 3 || node.nodeType === 4) {
      var text = node.data.replace(/[ \r\n\t]+/g, " ");
      if ((!prevText || / $/.test(prevText.data)) && !keepLeadingWs && text[0] === " ") {
        text = text.substr(1);
      }
      if (!text) {
        node = remove(node);
        continue;
      }
      node.data = text;
      prevText = node;
    } else if (node.nodeType === 1) {
      if (isBlock2(node) || node.nodeName === "BR") {
        if (prevText) {
          prevText.data = prevText.data.replace(/ $/, "");
        }
        prevText = null;
        keepLeadingWs = false;
      } else if (isVoid2(node) || isPre(node)) {
        prevText = null;
        keepLeadingWs = true;
      } else if (prevText) {
        keepLeadingWs = false;
      }
    } else {
      node = remove(node);
      continue;
    }
    var nextNode = next(prev, node, isPre);
    prev = node;
    node = nextNode;
  }
  if (prevText) {
    prevText.data = prevText.data.replace(/ $/, "");
    if (!prevText.data) {
      remove(prevText);
    }
  }
}
function remove(node) {
  var next2 = node.nextSibling || node.parentNode;
  node.parentNode.removeChild(node);
  return next2;
}
function next(prev, current, isPre) {
  if (prev && prev.parentNode === current || isPre(current)) {
    return current.nextSibling || current.parentNode;
  }
  return current.firstChild || current.nextSibling || current.parentNode;
}
var root = typeof window !== "undefined" ? window : {};
function canParseHTMLNatively() {
  var Parser = root.DOMParser;
  var canParse = false;
  try {
    if (new Parser().parseFromString("", "text/html")) {
      canParse = true;
    }
  } catch (e) {
  }
  return canParse;
}
function createHTMLParser() {
  var Parser = function() {
  };
  {
    if (shouldUseActiveX()) {
      Parser.prototype.parseFromString = function(string) {
        var doc = new window.ActiveXObject("htmlfile");
        doc.designMode = "on";
        doc.open();
        doc.write(string);
        doc.close();
        return doc;
      };
    } else {
      Parser.prototype.parseFromString = function(string) {
        var doc = document.implementation.createHTMLDocument("");
        doc.open();
        doc.write(string);
        doc.close();
        return doc;
      };
    }
  }
  return Parser;
}
function shouldUseActiveX() {
  var useActiveX = false;
  try {
    document.implementation.createHTMLDocument("").open();
  } catch (e) {
    if (window.ActiveXObject)
      useActiveX = true;
  }
  return useActiveX;
}
var HTMLParser = canParseHTMLNatively() ? root.DOMParser : createHTMLParser();
function RootNode(input, options) {
  var root2;
  if (typeof input === "string") {
    var doc = htmlParser().parseFromString('<x-turndown id="turndown-root">' + input + "</x-turndown>", "text/html");
    root2 = doc.getElementById("turndown-root");
  } else {
    root2 = input.cloneNode(true);
  }
  collapseWhitespace({
    element: root2,
    isBlock,
    isVoid,
    isPre: options.preformattedCode ? isPreOrCode : null
  });
  return root2;
}
var _htmlParser;
function htmlParser() {
  _htmlParser = _htmlParser || new HTMLParser();
  return _htmlParser;
}
function isPreOrCode(node) {
  return node.nodeName === "PRE" || node.nodeName === "CODE";
}
function Node(node, options) {
  node.isBlock = isBlock(node);
  node.isCode = node.nodeName === "CODE" || node.parentNode.isCode;
  node.isBlank = isBlank(node);
  node.flankingWhitespace = flankingWhitespace(node, options);
  return node;
}
function isBlank(node) {
  return !isVoid(node) && !isMeaningfulWhenBlank(node) && /^\s*$/i.test(node.textContent) && !hasVoid(node) && !hasMeaningfulWhenBlank(node);
}
function flankingWhitespace(node, options) {
  if (node.isBlock || options.preformattedCode && node.isCode) {
    return { leading: "", trailing: "" };
  }
  var edges = edgeWhitespace(node.textContent);
  if (edges.leadingAscii && isFlankedByWhitespace("left", node, options)) {
    edges.leading = edges.leadingNonAscii;
  }
  if (edges.trailingAscii && isFlankedByWhitespace("right", node, options)) {
    edges.trailing = edges.trailingNonAscii;
  }
  return { leading: edges.leading, trailing: edges.trailing };
}
function edgeWhitespace(string) {
  var m = string.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);
  return {
    leading: m[1],
    leadingAscii: m[2],
    leadingNonAscii: m[3],
    trailing: m[4],
    trailingNonAscii: m[5],
    trailingAscii: m[6]
  };
}
function isFlankedByWhitespace(side, node, options) {
  var sibling;
  var regExp;
  var isFlanked;
  if (side === "left") {
    sibling = node.previousSibling;
    regExp = / $/;
  } else {
    sibling = node.nextSibling;
    regExp = /^ /;
  }
  if (sibling) {
    if (sibling.nodeType === 3) {
      isFlanked = regExp.test(sibling.nodeValue);
    } else if (options.preformattedCode && sibling.nodeName === "CODE") {
      isFlanked = false;
    } else if (sibling.nodeType === 1 && !isBlock(sibling)) {
      isFlanked = regExp.test(sibling.textContent);
    }
  }
  return isFlanked;
}
var reduce = Array.prototype.reduce;
var escapes = [
  [/\\/g, "\\\\"],
  [/\*/g, "\\*"],
  [/^-/g, "\\-"],
  [/^\+ /g, "\\+ "],
  [/^(=+)/g, "\\$1"],
  [/^(#{1,6}) /g, "\\$1 "],
  [/`/g, "\\`"],
  [/^~~~/g, "\\~~~"],
  [/\[/g, "\\["],
  [/\]/g, "\\]"],
  [/^>/g, "\\>"],
  [/_/g, "\\_"],
  [/^(\d+)\. /g, "$1\\. "]
];
function TurndownService(options) {
  if (!(this instanceof TurndownService))
    return new TurndownService(options);
  var defaults = {
    rules,
    headingStyle: "setext",
    hr: "* * *",
    bulletListMarker: "*",
    codeBlockStyle: "indented",
    fence: "```",
    emDelimiter: "_",
    strongDelimiter: "**",
    linkStyle: "inlined",
    linkReferenceStyle: "full",
    br: "  ",
    preformattedCode: false,
    blankReplacement: function(content, node) {
      return node.isBlock ? "\n\n" : "";
    },
    keepReplacement: function(content, node) {
      return node.isBlock ? "\n\n" + node.outerHTML + "\n\n" : node.outerHTML;
    },
    defaultReplacement: function(content, node) {
      return node.isBlock ? "\n\n" + content + "\n\n" : content;
    }
  };
  this.options = extend({}, defaults, options);
  this.rules = new Rules(this.options);
}
TurndownService.prototype = {
  turndown: function(input) {
    if (!canConvert(input)) {
      throw new TypeError(input + " is not a string, or an element/document/fragment node.");
    }
    if (input === "")
      return "";
    var output = process.call(this, new RootNode(input, this.options));
    return postProcess.call(this, output);
  },
  use: function(plugin) {
    if (Array.isArray(plugin)) {
      for (var i = 0; i < plugin.length; i++)
        this.use(plugin[i]);
    } else if (typeof plugin === "function") {
      plugin(this);
    } else {
      throw new TypeError("plugin must be a Function or an Array of Functions");
    }
    return this;
  },
  addRule: function(key, rule) {
    this.rules.add(key, rule);
    return this;
  },
  keep: function(filter) {
    this.rules.keep(filter);
    return this;
  },
  remove: function(filter) {
    this.rules.remove(filter);
    return this;
  },
  escape: function(string) {
    return escapes.reduce(function(accumulator, escape) {
      return accumulator.replace(escape[0], escape[1]);
    }, string);
  }
};
function process(parentNode) {
  var self = this;
  return reduce.call(parentNode.childNodes, function(output, node) {
    node = new Node(node, self.options);
    var replacement = "";
    if (node.nodeType === 3) {
      replacement = node.isCode ? node.nodeValue : self.escape(node.nodeValue);
    } else if (node.nodeType === 1) {
      replacement = replacementForNode.call(self, node);
    }
    return join(output, replacement);
  }, "");
}
function postProcess(output) {
  var self = this;
  this.rules.forEach(function(rule) {
    if (typeof rule.append === "function") {
      output = join(output, rule.append(self.options));
    }
  });
  return output.replace(/^[\t\r\n]+/, "").replace(/[\t\r\n\s]+$/, "");
}
function replacementForNode(node) {
  var rule = this.rules.forNode(node);
  var content = process.call(this, node);
  var whitespace = node.flankingWhitespace;
  if (whitespace.leading || whitespace.trailing)
    content = content.trim();
  return whitespace.leading + rule.replacement(content, node, this.options) + whitespace.trailing;
}
function join(output, replacement) {
  var s1 = trimTrailingNewlines(output);
  var s2 = trimLeadingNewlines(replacement);
  var nls = Math.max(output.length - s1.length, replacement.length - s2.length);
  var separator = "\n\n".substring(0, nls);
  return s1 + separator + s2;
}
function canConvert(input) {
  return input != null && (typeof input === "string" || input.nodeType && (input.nodeType === 1 || input.nodeType === 9 || input.nodeType === 11));
}
var turndown_browser_es_default = TurndownService;

// node_modules/turndown-plugin-gfm/lib/turndown-plugin-gfm.es.js
var highlightRegExp = /highlight-(?:text|source)-([a-z0-9]+)/;
function highlightedCodeBlock(turndownService) {
  turndownService.addRule("highlightedCodeBlock", {
    filter: function(node) {
      var firstChild = node.firstChild;
      return node.nodeName === "DIV" && highlightRegExp.test(node.className) && firstChild && firstChild.nodeName === "PRE";
    },
    replacement: function(content, node, options) {
      var className = node.className || "";
      var language = (className.match(highlightRegExp) || [null, ""])[1];
      return "\n\n" + options.fence + language + "\n" + node.firstChild.textContent + "\n" + options.fence + "\n\n";
    }
  });
}
function strikethrough(turndownService) {
  turndownService.addRule("strikethrough", {
    filter: ["del", "s", "strike"],
    replacement: function(content) {
      return "~" + content + "~";
    }
  });
}
var indexOf = Array.prototype.indexOf;
var every = Array.prototype.every;
var rules2 = {};
rules2.tableCell = {
  filter: ["th", "td"],
  replacement: function(content, node) {
    return cell(content, node);
  }
};
rules2.tableRow = {
  filter: "tr",
  replacement: function(content, node) {
    var borderCells = "";
    var alignMap = { left: ":--", right: "--:", center: ":-:" };
    if (isHeadingRow(node)) {
      for (var i = 0; i < node.childNodes.length; i++) {
        var border = "---";
        var align = (node.childNodes[i].getAttribute("align") || "").toLowerCase();
        if (align)
          border = alignMap[align] || border;
        borderCells += cell(border, node.childNodes[i]);
      }
    }
    return "\n" + content + (borderCells ? "\n" + borderCells : "");
  }
};
rules2.table = {
  filter: function(node) {
    return node.nodeName === "TABLE" && isHeadingRow(node.rows[0]);
  },
  replacement: function(content) {
    content = content.replace("\n\n", "\n");
    return "\n\n" + content + "\n\n";
  }
};
rules2.tableSection = {
  filter: ["thead", "tbody", "tfoot"],
  replacement: function(content) {
    return content;
  }
};
function isHeadingRow(tr) {
  var parentNode = tr.parentNode;
  return parentNode.nodeName === "THEAD" || parentNode.firstChild === tr && (parentNode.nodeName === "TABLE" || isFirstTbody(parentNode)) && every.call(tr.childNodes, function(n) {
    return n.nodeName === "TH";
  });
}
function isFirstTbody(element) {
  var previousSibling = element.previousSibling;
  return element.nodeName === "TBODY" && (!previousSibling || previousSibling.nodeName === "THEAD" && /^\s*$/i.test(previousSibling.textContent));
}
function cell(content, node) {
  var index = indexOf.call(node.parentNode.childNodes, node);
  var prefix = " ";
  if (index === 0)
    prefix = "| ";
  return prefix + content + " |";
}
function tables(turndownService) {
  turndownService.keep(function(node) {
    return node.nodeName === "TABLE" && !isHeadingRow(node.rows[0]);
  });
  for (var key in rules2)
    turndownService.addRule(key, rules2[key]);
}
function taskListItems(turndownService) {
  turndownService.addRule("taskListItems", {
    filter: function(node) {
      return node.type === "checkbox" && node.parentNode.nodeName === "LI";
    },
    replacement: function(content, node) {
      return (node.checked ? "[x]" : "[ ]") + " ";
    }
  });
}
function gfm(turndownService) {
  turndownService.use([
    highlightedCodeBlock,
    strikethrough,
    tables,
    taskListItems
  ]);
}

// src/AppHelper.ts
var import_obsidian6 = require("obsidian");
var AppHelper = class {
  constructor(app) {
    this.app = app;
    this.vault = app.vault;
  }
  async createOrModifyBinary(filename_base, blob) {
    const parent = this.getParentFolder();
    const type = blob.type;
    let extension = type.split("image/", 2).at(1);
    if (extension == "svg+xml") {
      extension = "svg";
    }
    const filename = `${filename_base}.${extension}`;
    const filepath = (0, import_obsidian6.normalizePath)(`${parent.path}/${filename}`);
    const file = this.vault.getAbstractFileByPath(filepath);
    if (file && file instanceof import_obsidian6.TFile) {
      this.vault.modifyBinary(file, await blob.arrayBuffer());
    } else {
      this.vault.createBinary(filepath, await blob.arrayBuffer());
    }
    return filename;
  }
  async createOrModifyNote(title, markdown, front_matter) {
    const parent = this.getParentFolder();
    const filename = (0, import_obsidian6.normalizePath)(`${parent.path}/${title}.md`);
    const file_content = `---
${(0, import_obsidian6.stringifyYaml)(front_matter)}
---
${markdown}`;
    const file = this.vault.getAbstractFileByPath(filename);
    if (file && file instanceof import_obsidian6.TFile) {
      this.vault.modify(file, file_content);
      return file;
    } else {
      return this.vault.create(filename, file_content);
    }
  }
  async getNoteByTitle(title) {
    return this.app.metadataCache.getFirstLinkpathDest((0, import_obsidian6.getLinkpath)(title), this.app.vault.getRoot().path);
  }
  getParentFolder() {
    const active_file = this.app.workspace.getActiveFile();
    let parent = this.vault.getRoot();
    if (active_file) {
      parent = this.app.fileManager.getNewFileParent(active_file.path);
    }
    return parent;
  }
  async updateNote(file, markdown, new_front_matter) {
    const cached_front_matter = this.app.metadataCache.getFileCache(file).frontmatter;
    const front_matter = { ...cached_front_matter, ...new_front_matter };
    delete front_matter.position;
    const file_content = `---
${(0, import_obsidian6.stringifyYaml)(front_matter)}
---
${markdown}`;
    return this.vault.modify(file, file_content);
  }
};

// src/Importer.ts
var Importer = class {
  constructor(plugin) {
    this.hostname = plugin.settings.hostname;
    this.client = new QuipAPIClient(plugin.settings.hostname, plugin.settings.token);
    this.td = new turndown_browser_es_default({
      headingStyle: "atx",
      hr: "***",
      bulletListMarker: "-",
      codeBlockStyle: "fenced"
    });
    this.td.use(gfm);
    this.app = plugin.app;
    this.helper = new AppHelper(plugin.app);
  }
  async process_A(anchor) {
    const href = anchor.getAttribute("href");
    if (href && this.hostname.contains(new URL(href).hostname)) {
      const secret_path = href.split(".com/", 2).at(1).split("/").at(0);
      const title = anchor.innerText;
      const file = await this.helper.getNoteByTitle(title);
      if (file) {
        const frontmatter = this.app.metadataCache.getCache(file.path).frontmatter;
        if (frontmatter) {
          const quip = (0, import_obsidian7.parseFrontMatterEntry)(frontmatter, "quip");
          if (quip && quip.contains(secret_path)) {
            anchor.setAttribute("href", encodeURIComponent(file.path));
          }
        }
      }
    }
  }
  async process_IMG(img, info) {
    const src = img.getAttribute("src");
    if (src) {
      const blob = await this.client.getBlob(src);
      const filename_base = `${info.title.replaceAll(" ", "_")}${src.replaceAll("/", "-")}`;
      const filename = await this.helper.createOrModifyBinary(filename_base, blob);
      img.setAttribute("src", filename);
    }
  }
  async importHTML(url, active_file) {
    const secret_path = url.split(".com/", 2).at(1).split("/").at(0);
    const html = await this.client.getDocumentHTML(secret_path);
    const info = (await this.client.getThread(secret_path)).thread;
    const fragment = (0, import_obsidian7.sanitizeHTMLToDom)(html);
    for (const anchor of Array.from(fragment.querySelectorAll("a"))) {
      await this.process_A(anchor);
    }
    for (const img of Array.from(fragment.querySelectorAll("img"))) {
      await this.process_IMG(img, info);
    }
    const markdown = this.td.turndown(fragment);
    const front_matter = {
      title: info.title,
      quip: url,
      quip_thread_imported: {
        id: info.id,
        updated_usec: 0,
        updated_datetime: ""
      }
    };
    if (info.updated_usec) {
      front_matter.quip_thread_imported.updated_usec = info.updated_usec;
      front_matter.quip_thread_imported.updated_datetime = new Date(info.updated_usec / 1e3).toLocaleString();
    }
    if (typeof active_file === "undefined") {
      const file = this.helper.createOrModifyNote(info.title, markdown, front_matter);
      this.app.workspace.getLeaf("tab").openFile(await file);
    } else {
      this.helper.updateNote(active_file, markdown, front_matter);
    }
  }
};

// src/main.ts
var QuipPlugin = class extends import_obsidian8.Plugin {
  async onload() {
    await this.loadSettings();
    this.addCommand({
      id: "publish-html",
      name: "Publish as new Quip document",
      checkCallback: (checking) => {
        var _a;
        const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian8.MarkdownView);
        if (markdownView) {
          if (!checking) {
            let title = null;
            if (this.settings.prependTitle) {
              const file = this.app.workspace.getActiveFile();
              title = ((_a = this.app.metadataCache.getFileCache(file).frontmatter) == null ? void 0 : _a.title) || file.basename;
            }
            this.publishHTML(markdownView, title);
          }
          return true;
        }
        return false;
      }
    });
    this.addCommand({
      id: "update-html",
      name: "Update existing Quip document",
      checkCallback: (checking) => {
        var _a;
        const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian8.MarkdownView);
        if (markdownView) {
          const link = (_a = this.app.metadataCache.getFileCache(this.app.workspace.getActiveFile()).frontmatter) == null ? void 0 : _a.quip;
          if (link) {
            if (!checking && link) {
              this.updateHTML(link, markdownView);
            }
            return true;
          }
        }
        return false;
      }
    });
    this.addCommand({
      id: "import",
      name: "Import Quip document",
      callback: () => {
        try {
          const client = new QuipAPIClient(this.settings.hostname, this.settings.token);
          const modal = new ImportModal(this.app, client, this.cached_recent_threads, (url) => {
            new Importer(this).importHTML(url);
          });
          modal.open();
        } catch (error) {
          console.error(error);
          const text = error.message || JSON.stringify(error.info);
          new import_obsidian8.Notice(text);
        }
      }
    });
    this.addCommand({
      id: "refresh",
      name: "Refresh note from Quip document",
      checkCallback: (checking) => {
        var _a;
        const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian8.MarkdownView);
        if (markdownView) {
          const link = (_a = this.app.metadataCache.getFileCache(this.app.workspace.getActiveFile()).frontmatter) == null ? void 0 : _a.quip;
          if (link) {
            if (!checking && link) {
              new Importer(this).importHTML(link, this.app.workspace.getActiveFile());
            }
            return true;
          }
        }
        return false;
      }
    });
    this.addSettingTab(new QuipSettingTab(this.app, this));
  }
  async publishHTML(markdownView, title) {
    let html = await render(this, markdownView, this.app.workspace.getActiveFile());
    if (title) {
      html = `<h1>${title}</h1>${html}`;
    }
    new import_obsidian8.Notice(`Publishing to ${this.settings.hostname}...`);
    try {
      const client = new QuipAPIClient(this.settings.hostname, this.settings.token);
      const response = await client.newHTMLDocument(html, title);
      this.onSuccessfulPublish(response.thread.link);
    } catch (error) {
      console.error(error);
      const text = error.message || JSON.stringify(error.info);
      new import_obsidian8.Notice(text);
    }
  }
  async updateHTML(link, markdownView) {
    const html = await render(this, markdownView, this.app.workspace.getActiveFile());
    new import_obsidian8.Notice(`Publishing to ${this.settings.hostname}...`);
    try {
      const client = new QuipAPIClient(this.settings.hostname, this.settings.token);
      await client.updateHTMLDocument(link, html);
      new SuccessModal(this.app, link, `If your Quip document hasn't updated yet, try refreshing.`).open();
    } catch (error) {
      console.error("Failure invoking Quip APIs", error);
      console.dir(error);
      const text = error.message || JSON.stringify(error.info);
      new import_obsidian8.Notice(text);
    }
  }
  onSuccessfulPublish(link) {
    if (this.settings.addLink) {
      const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian8.MarkdownView);
      this.app.fileManager.processFrontMatter(markdownView.file, (frontMatter) => {
        frontMatter.quip = link;
      });
    }
    new SuccessModal(this.app, link).open();
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    this.cached_recent_threads = this.tryPreload();
  }
  async saveSettings() {
    this.cached_recent_threads = this.tryPreload();
    await this.saveData(this.settings);
  }
  async tryPreload() {
    const recent = [];
    try {
      const client = new QuipAPIClient(this.settings.hostname, this.settings.token);
      for (const [thread_id, thread_response] of Object.entries(await client.getRecentThreads())) {
        const thread_info = thread_response.thread;
        recent.push(thread_info);
      }
    } catch (error) {
      console.error(error);
    }
    return recent;
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3F1aXBhcGkudHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy9yZW5kZXJlci50cyIsICJzcmMvSW1wb3J0TW9kYWwudHMiLCAic3JjL1N1Y2Nlc3NNb2RhbC50cyIsICJzcmMvSW1wb3J0ZXIudHMiLCAibm9kZV9tb2R1bGVzL3R1cm5kb3duL2xpYi90dXJuZG93bi5icm93c2VyLmVzLmpzIiwgIm5vZGVfbW9kdWxlcy90dXJuZG93bi1wbHVnaW4tZ2ZtL2xpYi90dXJuZG93bi1wbHVnaW4tZ2ZtLmVzLmpzIiwgInNyYy9BcHBIZWxwZXIudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IE1hcmtkb3duVmlldywgTm90aWNlLCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBRdWlwQVBJQ2xpZW50IH0gZnJvbSAnLi9xdWlwYXBpJztcbmltcG9ydCByZW5kZXIgZnJvbSAnLi9yZW5kZXJlcic7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTLCBRdWlwUGx1Z2luU2V0dGluZ3MsIFF1aXBTZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBJbXBvcnRNb2RhbCB9IGZyb20gJy4vSW1wb3J0TW9kYWwnO1xuaW1wb3J0IHsgU3VjY2Vzc01vZGFsIH0gZnJvbSAnLi9TdWNjZXNzTW9kYWwnO1xuaW1wb3J0IHsgSW1wb3J0ZXIgfSBmcm9tICcuL0ltcG9ydGVyJztcblxuXG5pbnRlcmZhY2UgUXVpcEZyb250TWF0dGVyIHtcblx0cXVpcDogc3RyaW5nO1xuXHR0aXRsZT86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBRdWlwVGhyZWFkIHtcblx0bGluazogc3RyaW5nO1xuXHR0aXRsZT86IHN0cmluZztcblx0aWQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFF1aXBQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogUXVpcFBsdWdpblNldHRpbmdzO1xuXHRjYWNoZWRfcmVjZW50X3RocmVhZHM6IFByb21pc2U8UXVpcFRocmVhZFtdPjtcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3B1Ymxpc2gtaHRtbCcsXG5cdFx0XHRuYW1lOiAnUHVibGlzaCBhcyBuZXcgUXVpcCBkb2N1bWVudCcsXG5cdFx0XHRjaGVja0NhbGxiYWNrOiAoY2hlY2tpbmc6IGJvb2xlYW4pID0+IHtcblx0XHRcdFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRcdFx0Ly8gQ29uZGl0aW9ucyB0byBjaGVja1xuXHRcdFx0XHRpZiAobWFya2Rvd25WaWV3KSB7XG5cdFx0XHRcdFx0Ly8gSWYgY2hlY2tpbmcgaXMgdHJ1ZSwgd2UncmUgc2ltcGx5IFwiY2hlY2tpbmdcIiBpZiB0aGUgY29tbWFuZCBjYW4gYmUgcnVuLlxuXHRcdFx0XHRcdC8vIElmIGNoZWNraW5nIGlzIGZhbHNlLCB0aGVuIHdlIHdhbnQgdG8gYWN0dWFsbHkgcGVyZm9ybSB0aGUgb3BlcmF0aW9uLlxuXHRcdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcblx0XHRcdFx0XHRcdGxldCB0aXRsZSA9IG51bGw7XG5cdFx0XHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5wcmVwZW5kVGl0bGUpIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG5cdFx0XHRcdFx0XHRcdHRpdGxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSkuZnJvbnRtYXR0ZXI/LnRpdGxlIHx8IGZpbGUuYmFzZW5hbWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR0aGlzLnB1Ymxpc2hIVE1MKG1hcmtkb3duVmlldywgdGl0bGUpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFRoaXMgY29tbWFuZCB3aWxsIG9ubHkgc2hvdyB1cCBpbiBDb21tYW5kIFBhbGV0dGUgd2hlbiB0aGUgY2hlY2sgZnVuY3Rpb24gcmV0dXJucyB0cnVlXG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAndXBkYXRlLWh0bWwnLFxuXHRcdFx0bmFtZTogJ1VwZGF0ZSBleGlzdGluZyBRdWlwIGRvY3VtZW50Jyxcblx0XHRcdGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdFx0XHQvLyBDb25kaXRpb25zIHRvIGNoZWNrXG5cdFx0XHRcdGlmIChtYXJrZG93blZpZXcpIHtcblx0XHRcdFx0XHQvLyBJZiBjaGVja2luZyBpcyB0cnVlLCB3ZSdyZSBzaW1wbHkgXCJjaGVja2luZ1wiIGlmIHRoZSBjb21tYW5kIGNhbiBiZSBydW4uXG5cdFx0XHRcdFx0Ly8gSWYgY2hlY2tpbmcgaXMgZmFsc2UsIHRoZW4gd2Ugd2FudCB0byBhY3R1YWxseSBwZXJmb3JtIHRoZSBvcGVyYXRpb24uXG5cdFx0XHRcdFx0Y29uc3QgbGluayA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkpLmZyb250bWF0dGVyPy5xdWlwO1xuXHRcdFx0XHRcdGlmIChsaW5rKSB7XG5cdFx0XHRcdFx0XHRpZiAoIWNoZWNraW5nICYmIGxpbmspIHtcblx0XHRcdFx0XHRcdFx0dGhpcy51cGRhdGVIVE1MKGxpbmssIG1hcmtkb3duVmlldyk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIFRoaXMgY29tbWFuZCB3aWxsIG9ubHkgc2hvdyB1cCBpbiBDb21tYW5kIFBhbGV0dGUgd2hlbiB0aGUgY2hlY2sgZnVuY3Rpb24gcmV0dXJucyB0cnVlXG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnaW1wb3J0Jyxcblx0XHRcdG5hbWU6ICdJbXBvcnQgUXVpcCBkb2N1bWVudCcsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4ge1xuXHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdGNvbnN0IGNsaWVudCA9IG5ldyBRdWlwQVBJQ2xpZW50KHRoaXMuc2V0dGluZ3MuaG9zdG5hbWUsIHRoaXMuc2V0dGluZ3MudG9rZW4pO1xuXHRcdFx0XHRcdGNvbnN0IG1vZGFsID0gbmV3IEltcG9ydE1vZGFsKHRoaXMuYXBwLCBjbGllbnQsIHRoaXMuY2FjaGVkX3JlY2VudF90aHJlYWRzLCAodXJsKSA9PiB7XG5cdFx0XHRcdFx0XHRuZXcgSW1wb3J0ZXIodGhpcykuaW1wb3J0SFRNTCh1cmwpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdG1vZGFsLm9wZW4oKTtcblx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHRcdFx0XHRjb25zdCB0ZXh0ID0gZXJyb3IubWVzc2FnZSB8fCBKU09OLnN0cmluZ2lmeShlcnJvci5pbmZvKTtcblx0XHRcdFx0XHRuZXcgTm90aWNlKHRleHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdyZWZyZXNoJyxcblx0XHRcdG5hbWU6ICdSZWZyZXNoIG5vdGUgZnJvbSBRdWlwIGRvY3VtZW50Jyxcblx0XHRcdGNoZWNrQ2FsbGJhY2s6IChjaGVja2luZzogYm9vbGVhbikgPT4ge1xuXHRcdFx0XHRjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdFx0XHQvLyBDb25kaXRpb25zIHRvIGNoZWNrXG5cdFx0XHRcdGlmIChtYXJrZG93blZpZXcpIHtcblx0XHRcdFx0XHQvLyBJZiBjaGVja2luZyBpcyB0cnVlLCB3ZSdyZSBzaW1wbHkgXCJjaGVja2luZ1wiIGlmIHRoZSBjb21tYW5kIGNhbiBiZSBydW4uXG5cdFx0XHRcdFx0Ly8gSWYgY2hlY2tpbmcgaXMgZmFsc2UsIHRoZW4gd2Ugd2FudCB0byBhY3R1YWxseSBwZXJmb3JtIHRoZSBvcGVyYXRpb24uXG5cdFx0XHRcdFx0Y29uc3QgbGluayA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCkpLmZyb250bWF0dGVyPy5xdWlwO1xuXHRcdFx0XHRcdGlmIChsaW5rKSB7XG5cdFx0XHRcdFx0XHRpZiAoIWNoZWNraW5nICYmIGxpbmspIHtcblx0XHRcdFx0XHRcdFx0bmV3IEltcG9ydGVyKHRoaXMpLmltcG9ydEhUTUwobGluaywgdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSk7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIFRoaXMgY29tbWFuZCB3aWxsIG9ubHkgc2hvdyB1cCBpbiBDb21tYW5kIFBhbGV0dGUgd2hlbiB0aGUgY2hlY2sgZnVuY3Rpb24gcmV0dXJucyB0cnVlXG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IFF1aXBTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG5cdH1cblxuXG5cdGFzeW5jIHB1Ymxpc2hIVE1MKG1hcmtkb3duVmlldzogTWFya2Rvd25WaWV3LCB0aXRsZTogc3RyaW5nKSB7XG5cdFx0Ly8gUXVpcCBpbXBvcnQgbGlrZXMgdG8gcmVwbGFjZSB0aGUgZmlyc3QgaGVhZGluZyB3aXRoIHRoZSBkb2N1bWVudCB0aXRsZVxuXHRcdGxldCBodG1sID0gYXdhaXQgcmVuZGVyKHRoaXMsIG1hcmtkb3duVmlldywgdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKSk7XG5cdFx0aWYgKHRpdGxlKSB7XG5cdFx0XHRodG1sID0gYDxoMT4ke3RpdGxlfTwvaDE+JHtodG1sfWBcblx0XHR9XG5cdFx0bmV3IE5vdGljZShgUHVibGlzaGluZyB0byAke3RoaXMuc2V0dGluZ3MuaG9zdG5hbWV9Li4uYClcblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgY2xpZW50ID0gbmV3IFF1aXBBUElDbGllbnQodGhpcy5zZXR0aW5ncy5ob3N0bmFtZSwgdGhpcy5zZXR0aW5ncy50b2tlbik7XG5cdFx0XHRjb25zdCByZXNwb25zZSA9IGF3YWl0IGNsaWVudC5uZXdIVE1MRG9jdW1lbnQoaHRtbCwgdGl0bGUpO1xuXHRcdFx0dGhpcy5vblN1Y2Nlc3NmdWxQdWJsaXNoKHJlc3BvbnNlLnRocmVhZC5saW5rKTtcblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvcik7XG5cdFx0XHRjb25zdCB0ZXh0ID0gZXJyb3IubWVzc2FnZSB8fCBKU09OLnN0cmluZ2lmeShlcnJvci5pbmZvKTtcblx0XHRcdG5ldyBOb3RpY2UodGV4dCk7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgdXBkYXRlSFRNTChsaW5rOiBzdHJpbmcsIG1hcmtkb3duVmlldzogTWFya2Rvd25WaWV3KSB7XG5cdFx0Ly8gUXVpcCBpbXBvcnQgbGlrZXMgdG8gcmVwbGFjZSB0aGUgZmlyc3QgaGVhZGluZyB3aXRoIHRoZSBkb2N1bWVudCB0aXRsZVxuXHRcdGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXIodGhpcywgbWFya2Rvd25WaWV3LCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpKTtcblx0XHRuZXcgTm90aWNlKGBQdWJsaXNoaW5nIHRvICR7dGhpcy5zZXR0aW5ncy5ob3N0bmFtZX0uLi5gKVxuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBjbGllbnQgPSBuZXcgUXVpcEFQSUNsaWVudCh0aGlzLnNldHRpbmdzLmhvc3RuYW1lLCB0aGlzLnNldHRpbmdzLnRva2VuKTtcblx0XHRcdGF3YWl0IGNsaWVudC51cGRhdGVIVE1MRG9jdW1lbnQobGluaywgaHRtbCk7XG5cdFx0XHRuZXcgU3VjY2Vzc01vZGFsKHRoaXMuYXBwLCBsaW5rLCBgSWYgeW91ciBRdWlwIGRvY3VtZW50IGhhc24ndCB1cGRhdGVkIHlldCwgdHJ5IHJlZnJlc2hpbmcuYCkub3BlbigpO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiRmFpbHVyZSBpbnZva2luZyBRdWlwIEFQSXNcIiwgZXJyb3IpO1xuXHRcdFx0Y29uc29sZS5kaXIoZXJyb3IpO1xuXHRcdFx0Y29uc3QgdGV4dCA9IGVycm9yLm1lc3NhZ2UgfHwgSlNPTi5zdHJpbmdpZnkoZXJyb3IuaW5mbyk7XG5cdFx0XHRuZXcgTm90aWNlKHRleHQpO1xuXHRcdH1cblx0fVxuXG5cdG9uU3VjY2Vzc2Z1bFB1Ymxpc2gobGluazogc3RyaW5nKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuYWRkTGluaykge1xuXHRcdFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0XHRcdHRoaXMuYXBwLmZpbGVNYW5hZ2VyLnByb2Nlc3NGcm9udE1hdHRlcihtYXJrZG93blZpZXcuZmlsZSxcblx0XHRcdFx0KGZyb250TWF0dGVyOiBRdWlwRnJvbnRNYXR0ZXIpID0+IHtcblx0XHRcdFx0XHRmcm9udE1hdHRlci5xdWlwID0gbGluaztcblx0XHRcdFx0fSlcblx0XHR9XG5cdFx0bmV3IFN1Y2Nlc3NNb2RhbCh0aGlzLmFwcCwgbGluaykub3BlbigpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0XHR0aGlzLmNhY2hlZF9yZWNlbnRfdGhyZWFkcyA9IHRoaXMudHJ5UHJlbG9hZCgpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdHRoaXMuY2FjaGVkX3JlY2VudF90aHJlYWRzID0gdGhpcy50cnlQcmVsb2FkKCk7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdGFzeW5jIHRyeVByZWxvYWQoKTogUHJvbWlzZTxRdWlwVGhyZWFkW10+IHtcblx0XHRjb25zdCByZWNlbnQ6IFF1aXBUaHJlYWRbXSA9IFtdO1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBjbGllbnQgPSBuZXcgUXVpcEFQSUNsaWVudCh0aGlzLnNldHRpbmdzLmhvc3RuYW1lLCB0aGlzLnNldHRpbmdzLnRva2VuKTtcblx0XHRcdGZvciAoY29uc3QgW3RocmVhZF9pZCwgdGhyZWFkX3Jlc3BvbnNlXSBvZiBPYmplY3QuZW50cmllcyhhd2FpdCBjbGllbnQuZ2V0UmVjZW50VGhyZWFkcygpKSkge1xuXHRcdFx0XHRjb25zdCB0aHJlYWRfaW5mbyA9IHRocmVhZF9yZXNwb25zZS50aHJlYWQ7XG5cdFx0XHRcdHJlY2VudC5wdXNoKHRocmVhZF9pbmZvKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0Ly8gc3dhbGxvdyB0aGlzIGVycm9yXG5cdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHR9XG5cdFx0cmV0dXJuIHJlY2VudDtcblx0fVxufVxuXG5cbiIsICJpbXBvcnQge3JlcXVlc3RVcmwsIFJlcXVlc3RVcmxQYXJhbSwgc2FuaXRpemVIVE1MVG9Eb219IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERFRkFVTFRfU0VUVElOR1MgfSBmcm9tICcuL3NldHRpbmdzJztcblxuZW51bSBSZXF1ZXN0TWV0aG9kIHtcbiAgICBHRVQgPSBcIkdFVFwiLFxuICAgIFBPU1QgPSBcIlBPU1RcIlxufVxuXG5leHBvcnQgY2xhc3MgUXVpcEFQSUNsaWVudEVycm9yPFR5cGU+IGV4dGVuZHMgRXJyb3Ige1xuICAgIG5hbWU6IHN0cmluZztcbiAgICByZXNwb25zZTogUmVzcG9uc2U7XG4gICAgaW5mbzogVHlwZTtcblxuICAgIGNvbnN0cnVjdG9yKHJlc3BvbnNlOiBSZXNwb25zZSwgaW5mbzogVHlwZSkge1xuICAgICAgICBzdXBlcihcIkVycm9yIGludm9raW5nIFF1aXAgQVBJXCIpO1xuICAgICAgICB0aGlzLm5hbWUgPSBcIlF1aXBBUElDbGllbnRFcnJvclwiO1xuICAgICAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgIHRoaXMuaW5mbyA9IGluZm87XG4gICAgfVxuXG59XG5cbmVudW0gRG9jdW1lbnRGb3JtYXQge1xuXHRIVE1MID0gXCJodG1sXCIsXG5cdE1BUktET1dOID0gXCJtYXJrZG93blwiXG59XG5cbmVudW0gTG9jYXRpb24ge1xuICAgIEFQUEVORCA9IFwiMFwiLFxuICAgIFBSRVBFTkQgPSBcIjFcIixcbiAgICBBRlRFUl9TRUNUSU9OID0gXCIyXCIsXG4gICAgQkVGT1JFX1NFQ1RJT04gPSBcIjNcIixcbiAgICBSRVBMQUNFX1NFQ1RJT04gPSBcIjRcIixcbiAgICBERUxFVEVfU0VDVElPTiA9IFwiNVwiLFxuICAgIEFGVEVSX0RPQ1VNRU5UX1JBTkdFID0gXCI2XCIsXG4gICAgQkVGT1JFX0RPQ1VNRU5UX1JBTkdFID0gXCI3XCIsXG4gICAgUkVQTEFDRV9ET0NVTUVOVF9SQU5HRSA9IFwiOFwiLFxuICAgIERFTEVURV9ET0NVTUVOVF9SQU5HRSA9IFwiOVwiXG59XG5cbmludGVyZmFjZSBFZGl0RG9jdW1lbnRBcmd1bWVudHMgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICB0aHJlYWRfaWQ6IHN0cmluZztcbiAgICBjb250ZW50Pzogc3RyaW5nO1xuICAgIHNlY3Rpb25faWQ/OiBzdHJpbmc7XG4gICAgZG9jdW1lbnRfcmFuZ2U/OiBzdHJpbmc7XG4gICAgbG9jYXRpb24/OiBMb2NhdGlvbjtcbn1cblxuaW50ZXJmYWNlIE5ld0RvY3VtZW50QXJndW1lbnRzIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG5cdGNvbnRlbnQ6IHN0cmluZztcblx0dGl0bGU/OiBzdHJpbmc7XG5cdGZvcm1hdDogRG9jdW1lbnRGb3JtYXQ7XG59XG5cbmludGVyZmFjZSBHZXRUaHJlYWRIVE1MQXJndW1lbnRzIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgdGhyZWFkSWRPclNlY3JldFBhdGg6IHN0cmluZztcbiAgICBjdXJzb3I/OiBzdHJpbmdcbn1cblxuaW50ZXJmYWNlIFF1aXBUaHJlYWRJbmZvIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIHRpdGxlOiBzdHJpbmc7XG5cdGxpbms6IHN0cmluZztcbiAgICB1cGRhdGVkX3VzZWM6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIFF1aXBSZWNlbnRUaHJlYWRzIHtcbiAgICBba2V5OnN0cmluZ106IFF1aXBUaHJlYWRSZXNwb25zZVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1aXBUaHJlYWRSZXNwb25zZSB7XG5cdHRocmVhZDogUXVpcFRocmVhZEluZm87XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUXVpcFRocmVhZEVkaXRSZXNwb25zZSBleHRlbmRzIFF1aXBUaHJlYWRSZXNwb25zZSB7XG4gICAgaHRtbDogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFF1aXBUaHJlYWRIVE1MUmVzcG9uc2Uge1xuICAgIGh0bWw6IHN0cmluZztcbiAgICByZXNwb25zZV9tZXRhZGF0YTogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbn1cblxuZXhwb3J0IGNsYXNzIFF1aXBBUElDbGllbnQge1xuICAgIGFjY2Vzc1Rva2VuOiBzdHJpbmc7XG4gICAgaG9zdG5hbWU6IHN0cmluZztcblxuICAgIC8vIHRocm93cyBhbiBFcnJvciBpZiB3ZSBkb24ndCBoYXZlIHZpYWJsZSBzZXR0aW5nc1xuICAgIGNvbnN0cnVjdG9yKGhvc3RuYW1lOiBzdHJpbmcsIHRva2VuOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHRva2VuO1xuICAgICAgICB0aGlzLmhvc3RuYW1lID0gaG9zdG5hbWU7XG4gICAgICAgIGlmICh0b2tlbiA9PT0gREVGQVVMVF9TRVRUSU5HUy50b2tlbikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUXVpcCBBUEkgdG9rZW4gaGFzIG5vdCBiZWVuIHNldFwiKTtcbiAgICAgICAgfSBlbHNlIGlmIChob3N0bmFtZSA9PSBERUZBVUxUX1NFVFRJTkdTLmhvc3RuYW1lKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJRdWlwIEFQSSBob3N0bmFtZSBoYXMgbm90IGJlZW4gc2V0XCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgbmV3SFRNTERvY3VtZW50KGh0bWw6IHN0cmluZywgdGl0bGU6IHN0cmluZyk6IFByb21pc2U8UXVpcFRocmVhZFJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnM6IE5ld0RvY3VtZW50QXJndW1lbnRzID0ge1xuICAgICAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgICAgIGZvcm1hdDogRG9jdW1lbnRGb3JtYXQuSFRNTCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRpdGxlKSB7XG4gICAgICAgICAgICBvcHRpb25zLnRpdGxlID0gdGl0bGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMubmV3RG9jdW1lbnQob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0RG9jdW1lbnRIVE1MKHRocmVhZElkT3JTZWNyZXRQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICBsZXQgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgY29uc3Qgb3B0aW9uczogR2V0VGhyZWFkSFRNTEFyZ3VtZW50cyA9IHtcbiAgICAgICAgICAgIHRocmVhZElkT3JTZWNyZXRQYXRoOiB0aHJlYWRJZE9yU2VjcmV0UGF0aFxuICAgICAgICB9O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuZ2V0VGhyZWFkSFRNTChvcHRpb25zKTtcbiAgICAgICAgICAgIHJlc3VsdCArPSByZXNwb25zZS5odG1sO1xuICAgICAgICAgICAgb3B0aW9ucy5jdXJzb3IgPSByZXNwb25zZS5yZXNwb25zZV9tZXRhZGF0YT8ubmV4dF9jdXJzb3I7XG4gICAgICAgIH0gd2hpbGUgKG9wdGlvbnMuY3Vyc29yKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBhc3luYyB1cGRhdGVIVE1MRG9jdW1lbnQobGluazogc3RyaW5nLCBodG1sOiBzdHJpbmcpOiBQcm9taXNlPFF1aXBUaHJlYWRSZXNwb25zZVtdPiB7XG4gICAgICAgIGNvbnN0IHNlY3JldF9wYXRoID0gbGluay5zcGxpdCgnLmNvbS8nLCAyKS5hdCgxKS5zcGxpdCgnLycpLmF0KDApO1xuICAgICAgICBjb25zdCBtYXJrZXIgPSBcIlFVSVAtT0JTSURJQU4tREVMRVRFLU1BUktFUi1cIiArIERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHByZXBlbmRfaHRtbCA9IGAke2h0bWx9XG4gICAgICAgIDxoMT4ke21hcmtlcn08L2gxPlxuICAgICAgICA8cD48ZW0+RXZlcnl0aGluZyBhZnRlciB0aGUgPHN0cm9uZz4ke21hcmtlcn08L3N0cm9uZz4gaDEgc2hvdWxkIGJlIGRlbGV0ZWQgc2hvcnRseS4gRHVlIHRvIFF1aXAgbGltaXRhdGlvbnMsIHdlIG5lZWQgdG8gZGVsZXRlIGVhY2ggaDEgaGVhZGVyIHNlcGFyYXRlbHkuPC9lbT48L3A+YDtcbiAgICAgICAgY29uc3QgY3VycmVudF9odG1sID0gKGF3YWl0IHRoaXMucHJlcGVuZEhUTUwoc2VjcmV0X3BhdGgsIHByZXBlbmRfaHRtbCkpLmh0bWw7XG5cbiAgICAgICAgY29uc3QgZG9tID0gc2FuaXRpemVIVE1MVG9Eb20oY3VycmVudF9odG1sKTtcbiAgICAgICAgY29uc3QgcHJvbWlzZXM6IFByb21pc2U8UXVpcFRocmVhZFJlc3BvbnNlPltdID0gW107XG5cbiAgICAgICAgLy8gRmluZCBhbmQgcmVtb3ZlIGFsbCBoMSBoZWFkZXJzIGFmdGVyIHRoZSBtYXJrZXIsIGxldHRpbmcgdXMgcmVtb3ZlXG5cdFx0Ly8gYWxsIHByZXZpb3VzIGNvbnRlbnQgd2l0aCAjKGgxIGhlYWRlcnMpICsgMSBBUEkgY2FsbHNcbiAgICAgICAgbGV0IG1hcmtlcl9mb3VuZCA9IGZhbHNlO1xuICAgICAgICBjb25zdCBzZWN0aW9uX2hlYWRlcnMgPSBkb20ucXVlcnlTZWxlY3RvckFsbCgnaDEnKTtcbiAgICAgICAgZm9yIChjb25zdCBzZWN0aW9uX2hlYWRlciBvZiBBcnJheS5mcm9tKHNlY3Rpb25faGVhZGVycykpIHtcbiAgICAgICAgICAgIGlmIChzZWN0aW9uX2hlYWRlci5nZXRUZXh0KCkgPT0gbWFya2VyKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyX2ZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmRlYnVnKGBGb3VuZCBkZWxldGlvbiBtYXJrZXI6ICR7c2VjdGlvbl9oZWFkZXIuZ2V0VGV4dCgpfWApXG4gICAgICAgICAgICB9IGVsc2UgaWYgKG1hcmtlcl9mb3VuZCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoYERlbGV0aW5nIGgxIGhlYWRlcjogJHtzZWN0aW9uX2hlYWRlci5nZXRUZXh0KCl9YClcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHRoaXMuZGVsZXRlU2VjdGlvbihzZWNyZXRfcGF0aCwgc2VjdGlvbl9oZWFkZXIuZ2V0QXR0cignaWQnKSkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcylcbiAgICAgICAgcmVzcG9uc2VzLnB1c2goYXdhaXQgdGhpcy5kZWxldGVEb2N1bWVudFJhbmdlKHNlY3JldF9wYXRoLCBtYXJrZXIpKVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlc3BvbnNlcyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0VGhyZWFkSFRNTChvcHRpb25zOiBHZXRUaHJlYWRIVE1MQXJndW1lbnRzKTogUHJvbWlzZTxRdWlwVGhyZWFkSFRNTFJlc3BvbnNlPiB7XG5cbiAgICAgICAgbGV0IHVybCA9IGAvMi90aHJlYWRzLyR7b3B0aW9ucy50aHJlYWRJZE9yU2VjcmV0UGF0aH0vaHRtbGBcbiAgICAgICAgaWYgKG9wdGlvbnMuY3Vyc29yKSB7XG4gICAgICAgICAgICB1cmwgKz0gYD9jdXJzb3I9JHtvcHRpb25zLmN1cnNvcn1gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmFwaTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LCBRdWlwVGhyZWFkSFRNTFJlc3BvbnNlPih1cmwsIG51bGwpO1xuICAgIH1cblxuICAgIGFzeW5jIGFwcGVuZEhUTUwoc2VjcmV0X3BhdGg6IHN0cmluZywgaHRtbDogc3RyaW5nKSA6IFByb21pc2U8UXVpcFRocmVhZEVkaXRSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBvcHRpb25zOiBFZGl0RG9jdW1lbnRBcmd1bWVudHMgPSB7XG4gICAgICAgICAgICB0aHJlYWRfaWQ6IHNlY3JldF9wYXRoLFxuICAgICAgICAgICAgbG9jYXRpb246IExvY2F0aW9uLkFQUEVORCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWRpdERvY3VtZW50KG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGFzeW5jIHByZXBlbmRIVE1MKHNlY3JldF9wYXRoOiBzdHJpbmcsIGh0bWw6IHN0cmluZykgOiBQcm9taXNlPFF1aXBUaHJlYWRFZGl0UmVzcG9uc2U+IHtcbiAgICAgICAgY29uc3Qgb3B0aW9uczogRWRpdERvY3VtZW50QXJndW1lbnRzID0ge1xuICAgICAgICAgICAgdGhyZWFkX2lkOiBzZWNyZXRfcGF0aCxcbiAgICAgICAgICAgIGxvY2F0aW9uOiBMb2NhdGlvbi5QUkVQRU5ELFxuICAgICAgICAgICAgY29udGVudDogaHRtbFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5lZGl0RG9jdW1lbnQob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlRG9jdW1lbnRSYW5nZShzZWNyZXRfcGF0aDogc3RyaW5nLCBkb2N1bWVudF9yYW5nZTogc3RyaW5nKTogUHJvbWlzZTxRdWlwVGhyZWFkRWRpdFJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnM6IEVkaXREb2N1bWVudEFyZ3VtZW50cyA9IHtcbiAgICAgICAgICAgIHRocmVhZF9pZDogc2VjcmV0X3BhdGgsXG4gICAgICAgICAgICBsb2NhdGlvbjogTG9jYXRpb24uREVMRVRFX0RPQ1VNRU5UX1JBTkdFLFxuICAgICAgICAgICAgZG9jdW1lbnRfcmFuZ2U6IGRvY3VtZW50X3JhbmdlXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVkaXREb2N1bWVudChvcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBkZWxldGVTZWN0aW9uKHNlY3JldF9wYXRoOiBzdHJpbmcsIHNlY3Rpb25faWQ6IHN0cmluZyk6IFByb21pc2U8UXVpcFRocmVhZEVkaXRSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBvcHRpb25zOiBFZGl0RG9jdW1lbnRBcmd1bWVudHMgPSB7XG4gICAgICAgICAgICB0aHJlYWRfaWQ6IHNlY3JldF9wYXRoLFxuICAgICAgICAgICAgbG9jYXRpb246IExvY2F0aW9uLkRFTEVURV9TRUNUSU9OLFxuICAgICAgICAgICAgc2VjdGlvbl9pZDogc2VjdGlvbl9pZFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5lZGl0RG9jdW1lbnQob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZWRpdERvY3VtZW50KG9wdGlvbnM6IEVkaXREb2N1bWVudEFyZ3VtZW50cyk6IFByb21pc2U8UXVpcFRocmVhZEVkaXRSZXNwb25zZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5hcGk8RWRpdERvY3VtZW50QXJndW1lbnRzLCBRdWlwVGhyZWFkRWRpdFJlc3BvbnNlPignLzEvdGhyZWFkcy9lZGl0LWRvY3VtZW50Jywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0QmxvYihwYXRoOiBzdHJpbmcpOiBQcm9taXNlPEJsb2I+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC8xJHtwYXRofWA7XG4gICAgICAgIGNvbnN0IHJlc291cmNlID0gdGhpcy5idWlsZFJlcXVlc3QodXJsLCBudWxsKTtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0VXJsKHJlc291cmNlKTtcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gcmVzcG9uc2Uuc3RhdHVzO1xuICAgICAgICBpZiAoc3RhdHVzID49IDQwMCkge1xuICAgICAgICAgICAgc3dpdGNoIChzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDQwMTpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWlwIGF1dGhvcml6YXRpb24gZmFpbGVkJylcbiAgICAgICAgICAgICAgICBjYXNlIDQwNDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEb2N1bWVudCBub3QgZm91bmQgaW4gUXVpcDogJHt1cmx9YCk7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBRdWlwIHNlcnZlciBlcnJvcjogJHtzdGF0dXN9OiAke3Jlc3BvbnNlLnRleHR9YClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEJsb2IoW3Jlc3BvbnNlLmFycmF5QnVmZmVyXSwge1xuICAgICAgICAgICAgdHlwZTogcmVzcG9uc2UuaGVhZGVyc1snQ29udGVudC1UeXBlJ10gfHwgJ2ltYWdlL3BuZydcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgIH1cblxuICAgIGFzeW5jIGdldFJlY2VudFRocmVhZHMoKTogUHJvbWlzZTxRdWlwUmVjZW50VGhyZWFkcz4ge1xuICAgICAgICBjb25zdCB1cmwgPSAnLzEvdGhyZWFkcy9yZWNlbnQ/Y291bnQ9NTAnO1xuICAgICAgICByZXR1cm4gdGhpcy5hcGk8UmVjb3JkPHN0cmluZywgc3RyaW5nPiwgUXVpcFJlY2VudFRocmVhZHM+KHVybCwgbnVsbCk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0VGhyZWFkKHRocmVhZF9pZF9vcl9zZWNyZXRfcGF0aDogc3RyaW5nKTogUHJvbWlzZTxRdWlwVGhyZWFkUmVzcG9uc2U+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC8yL3RocmVhZHMvJHt0aHJlYWRfaWRfb3Jfc2VjcmV0X3BhdGh9YDtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBpPFJlY29yZDxzdHJpbmcsIHN0cmluZz4sIFF1aXBUaHJlYWRSZXNwb25zZT4odXJsLCBudWxsKTtcbiAgICB9XG5cbiAgICBhc3luYyBuZXdEb2N1bWVudChvcHRpb25zOiBOZXdEb2N1bWVudEFyZ3VtZW50cyk6IFByb21pc2U8UXVpcFRocmVhZFJlc3BvbnNlPiB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaTxOZXdEb2N1bWVudEFyZ3VtZW50cywgUXVpcFRocmVhZFJlc3BvbnNlPignLzEvdGhyZWFkcy9uZXctZG9jdW1lbnQnLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBhc3luYyBzZWFyY2hUaXRsZXMocXVlcnk6IHN0cmluZyk6IFByb21pc2U8UXVpcFRocmVhZFJlc3BvbnNlW10+IHtcbiAgICAgICAgY29uc3QgdXJsID0gYC8xL3RocmVhZHMvc2VhcmNoP29ubHlfbWF0Y2hfdGl0bGVzPXRydWUmcXVlcnk9JHtlbmNvZGVVUklDb21wb25lbnQocXVlcnkpfWA7XG4gICAgICAgIHJldHVybiB0aGlzLmFwaTxSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LCBRdWlwVGhyZWFkUmVzcG9uc2VbXT4odXJsLCBudWxsKTtcbiAgICB9XG5cbiAgICBidWlsZFJlcXVlc3Q8QXJnVHlwZSBleHRlbmRzIFJlY29yZDxzdHJpbmcsIHN0cmluZz4+KHBhdGg6IHN0cmluZywgcG9zdEFyZ3VtZW50czogQXJnVHlwZSk6IFJlcXVlc3RVcmxQYXJhbSB7XG4gICAgICAgIGNvbnN0IG9wdGlvbnM6IFJlcXVlc3RVcmxQYXJhbSA9IHtcbiAgICAgICAgICAgIHVybDogYGh0dHBzOi8vJHt0aGlzLmhvc3RuYW1lfSR7cGF0aH1gLFxuICAgICAgICAgICAgaGVhZGVyczoge30sXG4gICAgICAgICAgICB0aHJvdzogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuYWNjZXNzVG9rZW4pIHtcbiAgICAgICAgICAgIG9wdGlvbnMuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3RoaXMuYWNjZXNzVG9rZW59YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocG9zdEFyZ3VtZW50cykge1xuICAgICAgICAgICAgb3B0aW9ucy5tZXRob2QgPSBSZXF1ZXN0TWV0aG9kLlBPU1Q7XG4gICAgICAgICAgICBvcHRpb25zLmJvZHkgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHBvc3RBcmd1bWVudHMpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBvcHRpb25zLmNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuXG4gICAgYXN5bmMgYXBpPEFyZ1R5cGUgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LCBSZXNwb25zZVR5cGU+KHBhdGg6IHN0cmluZyxcbiAgICAgICAgICAgIHBvc3RBcmd1bWVudHM6IEFyZ1R5cGUpOiBQcm9taXNlPFJlc3BvbnNlVHlwZT57XG4gICAgICAgIGNvbnN0IHJlc291cmNlID0gdGhpcy5idWlsZFJlcXVlc3QocGF0aCwgcG9zdEFyZ3VtZW50cyk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVxdWVzdFVybChyZXNvdXJjZSk7XG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IChhd2FpdCByZXNwb25zZSkuc3RhdHVzO1xuICAgICAgICBpZiAoc3RhdHVzID49IDQwMCkge1xuICAgICAgICAgICAgc3dpdGNoIChzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICBjYXNlIDQwMTpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdRdWlwIGF1dGhvcml6YXRpb24gZmFpbGVkJylcbiAgICAgICAgICAgICAgICBjYXNlIDQwNDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBEb2N1bWVudCBub3QgZm91bmQgaW4gUXVpcDogJHtwYXRofWApO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgUXVpcCBzZXJ2ZXIgZXJyb3I6ICR7c3RhdHVzfTogJHthd2FpdCByZXNwb25zZS50ZXh0fWApXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb247XG4gICAgfVxufVxuIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBRdWlwUGx1Z2luIGZyb20gJy4vbWFpbic7XG5cblxuZXhwb3J0IGludGVyZmFjZSBRdWlwUGx1Z2luU2V0dGluZ3Mge1xuXHRob3N0bmFtZTogc3RyaW5nO1xuXHR0b2tlbjogc3RyaW5nO1xuXHRyZW1vdmVZQU1MOiBib29sZWFuO1xuXHRhZGRMaW5rOiBib29sZWFuO1xuXHRpbmxpbmVFbWJlZHM6IGJvb2xlYW47XG5cdHByZXBlbmRUaXRsZTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFF1aXBQbHVnaW5TZXR0aW5ncyA9IHtcblx0aG9zdG5hbWU6ICdwbGF0Zm9ybS5xdWlwLmNvbScsXG5cdHRva2VuOiAnJyxcblx0cmVtb3ZlWUFNTDogdHJ1ZSxcblx0YWRkTGluazogdHJ1ZSxcblx0aW5saW5lRW1iZWRzOiB0cnVlLFxuXHRwcmVwZW5kVGl0bGU6IGZhbHNlLFxufVxuXG5cbmV4cG9ydCBjbGFzcyBRdWlwU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IFF1aXBQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogUXVpcFBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XG5cblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdRdWlwIEFQSSBzZXR0aW5ncyd9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1BlcnNvbmFsIEFQSSBUb2tlbicpXG5cdFx0XHQuc2V0RGVzYygnT2J0YWluZWQgZnJvbSAvZGV2L3Rva2VuIG9uIHlvdXIgUXVpcCB3ZWJzaXRlJylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudG9rZW4pXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy50b2tlbiA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnQVBJIGhvc3RuYW1lJylcblx0XHRcdC5zZXREZXNjKCdFbmRwb2ludCBmb3IgY2FsbHMgdG8gdGhlIFF1aXAgYXV0b21hdGlvbiBBUEknKVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcigncGxhdGZvcm0ucXVpcC5jb20nKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9zdG5hbWUpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob3N0bmFtZSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDInLCB7dGV4dDogJ1B1Ymxpc2hpbmcgdG8gUXVpcCd9KTtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdSZW1vdmUgWUFNTCBmcm9udCBtYXR0ZXInKVxuXHRcdFx0LnNldERlc2MoJ1N0cmlwIGxlYWRpbmcgWUFNTCBvdXQgb2Ygbm90ZXMgYmVmb3JlIHNlbmRpbmcgdG8gUXVpcCcpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlbW92ZVlBTUwpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZW1vdmVZQU1MID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdBZGQgUXVpcCBsaW5rJylcblx0XHRcdC5zZXREZXNjKCdJbnNlcnQgYSBsaW5rIHRvIHRoZSBwdWJsaXNoZWQgUXVpcCBkb2N1bWVudCBpbnRvIFlBTUwgZnJvbnQgbWF0dGVyJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWRkTGluaylcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmFkZExpbmsgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSkpO1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0lubGluZSBlbWJlZGRlZCBub3RlcycpXG5cdFx0XHQuc2V0RGVzYygnUmVwbGFjZSBlbWJlZC1saW5rcyB3aXRoIHRoZSBjb250ZW50IG9mIHRob3NlIG5vdGVzJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5saW5lRW1iZWRzKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5saW5lRW1iZWRzID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdEb2N1bWVudCB0aXRsZScpXG5cdFx0XHQuc2V0RGVzYygnQWRkIE5vdGUgbmFtZSBhcyBRdWlwIERvY3VtZW50IHRpdGxlJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlcGVuZFRpdGxlKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlcGVuZFRpdGxlID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnZW0nLCB7XG5cdFx0XHR0ZXh0OiBcIk5vdGUgdGhhdCBRdWlwIGRvZXMgbm90IGV4cG9zZSBhbnkgQVBJIHRvIHVwZGF0ZSBhIHRpdGxlIG9mIGFuIGV4aXN0aW5nIGRvY3VtZW50LCBzbyByZW5hbWluZyBhIG5vdGUgd2lsbCBOT1QgY2hhbmdlIHRoZSBkb2N1bWVudCB0aXRsZSBpbiBRdWlwLlwiXG5cdFx0fSk7XG5cdH1cbn0iLCAiLy8gYnJhbmNoZWQgZnJvbSBNSVQtbGljZW5zZWQgY29kZSBhdCBcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9PbGl2ZXJCYWxmb3VyL29ic2lkaWFuLXBhbmRvYy9ibG9iL21hc3Rlci9yZW5kZXJlci50c1xuXG5pbXBvcnQgUXVpcFBsdWdpbiBmcm9tICcuL21haW4nO1xuXG5pbXBvcnQgeyBnZXRMaW5rcGF0aCwgTWFya2Rvd25SZW5kZXJlciwgTWFya2Rvd25WaWV3LCBwYXJzZUZyb250TWF0dGVyRW50cnksIFRGaWxlLCBWYXVsdCB9IGZyb20gJ29ic2lkaWFuJztcblxuaW50ZXJmYWNlIExvb2t1cFRhYmxlIHtcbiAgICBbaW5kZXg6IHN0cmluZ106IHN0cmluZ1xufVxuXG5jb25zdCBtaW1lVHlwZVRhYmxlIDogTG9va3VwVGFibGUgPSB7XG4gICAgYm1wOiAnaW1hZ2UveC1tcy1ibXAnLFxuICAgIGdpZjogJ2ltYWdlL2dpZicsXG4gICAganBlZzogJ2ltYWdlL2pwZWcnLFxuICAgIGpwZzogJ2ltYWdlL2pwZWcnLFxuICAgIHBuZzogJ2ltYWdlL3BuZycsXG4gICAgc3ZnOiAnaW1hZ2Uvc3ZnK3htbCcsXG4gICAgdGlmOiAnaW1hZ2UvdGlmZicsXG4gICAgdGlmZjogJ2ltYWdlL3RpZmYnLFxuICAgIHdlYnA6ICdpbWFnZS93ZWJwJ1xufVxuXG5cbmFzeW5jIGZ1bmN0aW9uIHBvc3RQcm9jZXNzUmVuZGVyZWRIVE1MKHBsdWdpbjogUXVpcFBsdWdpbiwgaW5wdXRGaWxlOiBURmlsZSwgd3JhcHBlcjogSFRNTEVsZW1lbnQsXG4gICAgcGFyZW50RmlsZXM6IHN0cmluZ1tdID0gW10pXG57XG4gICAgY29uc3QgdmF1bHQgPSBwbHVnaW4uYXBwLnZhdWx0IGFzIFZhdWx0O1xuICAgIC8vIEZpeCBpbnRlcm5hbCBsaW5rc1xuICAgIGZvciAoY29uc3QgYW5jaG9yIG9mIEFycmF5LmZyb20od3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCdhLmludGVybmFsLWxpbmsnKSkpIHtcbiAgICAgICAgY29uc3QgbGluayA9ICBhbmNob3IuZ2V0QXR0cmlidXRlKCdkYXRhLWhyZWYnKVxuICAgICAgICBjb25zdCBmaWxlID0gcGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGdldExpbmtwYXRoKGxpbmspLCBpbnB1dEZpbGUucGF0aCk7XG4gICAgICAgIGlmIChmaWxlICYmIGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgYXdhaXQgcGx1Z2luLmFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgKGZyb250X21hdHRlcikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHF1aXA6IHN0cmluZyA9IHBhcnNlRnJvbnRNYXR0ZXJFbnRyeShmcm9udF9tYXR0ZXIsICdxdWlwJyk7XG4gICAgICAgICAgICAgICAgaWYgKHF1aXApIHtcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yLnNldEF0dHJpYnV0ZSgnaHJlZicsIHF1aXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEZpeCA8c3BhbiBzcmM9XCJpbWFnZS5wbmdcIj5cbiAgICBmb3IgKGNvbnN0IHNwYW4gb2YgQXJyYXkuZnJvbSh3cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ3NwYW5bc3JjJD1cIi5wbmdcIl0sIHNwYW5bc3JjJD1cIi5qcGdcIl0sIHNwYW5bc3JjJD1cIi5naWZcIl0sIHNwYW5bc3JjJD1cIi5qcGVnXCJdJykpKSB7XG4gICAgICAgIGNvbnN0IGltZyA9IGNyZWF0ZUVsKCdpbWcnLCB7XG4gICAgICAgICAgICAnYXR0cic6IHsnc3JjJzogc3Bhbi5nZXRBdHRyKFwic3JjXCIpIH0sXG4gICAgICAgICAgICAnY2xzJzogc3Bhbi5jbGFzc05hbWVcbiAgICAgICAgfSk7XG4gICAgICAgIHNwYW4ucmVwbGFjZVdpdGgoaW1nKTtcbiAgICB9XG4gICAgaWYgKHBsdWdpbi5zZXR0aW5ncy5pbmxpbmVFbWJlZHMpIHtcbiAgICAgICAgLy8gRml4IDxpbWcgY2xhc3M9J2ludGVybmFsLWVtYmVkJyBzcmM9J2ZpbGVfaW5fdmF1bHQnPlxuICAgICAgICBmb3IgKGNvbnN0IHNwYW4gb2YgQXJyYXkuZnJvbSh3cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZy5pbnRlcm5hbC1lbWJlZCcpKSkge1xuICAgICAgICAgICAgY29uc3Qgc3JjID0gc3Bhbi5nZXRBdHRyaWJ1dGUoJ3NyYycpO1xuICAgICAgICAgICAgaWYgKHNyYykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN1YmZvbGRlciA9IGlucHV0RmlsZS5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHBsdWdpbi5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChzcmMsIHN1YmZvbGRlci5wYXRoKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBieXRlcyA9IGF3YWl0IHZhdWx0LnJlYWRCaW5hcnkoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBtaW1lVHlwZVRhYmxlW2ZpbGUuZXh0ZW5zaW9uXSA/PyAnaW1hZ2UvanBlZyc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuY29kZWQgPSBCdWZmZXIuZnJvbShieXRlcykudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICAgICAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZSgnc3JjJywgYGRhdGE6JHt0eXBlfTtiYXNlNjQsJHtlbmNvZGVkfWApO1xuXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDb250aW51ZSBpZiBpdCBjYW4ndCBiZSBsb2FkZWRcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlF1aXAgcGx1Z2luIGVuY291bnRlcmVkIGFuIGVycm9yIHRyeWluZyB0byBsb2FkIGFuIGVtYmVkZGVkIGltYWdlOiBcIiArIGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEZpeCA8c3BhbiBjbGFzcz0naW50ZXJuYWwtZW1iZWQnIHNyYz0nYW5vdGhlcl9ub3RlX3dpdGhvdXRfZXh0ZW5zaW9uJz5cbiAgICAgICAgZm9yIChjb25zdCBzcGFuIG9mIEFycmF5LmZyb20od3JhcHBlci5xdWVyeVNlbGVjdG9yQWxsKCdzcGFuLmludGVybmFsLWVtYmVkJykpKSB7XG4gICAgICAgICAgICBjb25zdCBzcmMgPSBzcGFuLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG4gICAgICAgICAgICBpZiAoc3JjKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3ViZm9sZGVyID0gaW5wdXRGaWxlLnBhcmVudDtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gcGx1Z2luLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHNyYywgc3ViZm9sZGVyLnBhdGgpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJlbnRGaWxlcy5pbmRleE9mKGZpbGUucGF0aCkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSd2ZSBnb3QgYW4gaW5maW5pdGUgcmVjdXJzaW9uIG9uIG91ciBoYW5kc1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2Ugc2hvdWxkIHJlcGxhY2UgdGhlIGVtYmVkIHdpdGggYSB3aWtpbGlua1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlbiBvdXIgbGluayBwcm9jZXNzaW5nIGhhcHBlbnMgYWZ0ZXJ3YXJkc1xuICAgICAgICAgICAgICAgICAgICAgICAgc3Bhbi5vdXRlckhUTUwgPSBgPGEgaHJlZj1cIiR7ZmlsZX1cIj4ke3NwYW4uaW5uZXJIVE1MfTwvYT5gO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFya2Rvd24gPSBhd2FpdCB2YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UGFyZW50RmlsZXMgPSBbLi4ucGFyZW50RmlsZXNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3UGFyZW50RmlsZXMucHVzaChpbnB1dEZpbGUucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBiZWNhdXNlIG9mIHRoaXMgY2FzdCwgZW1iZWRkZWQgbm90ZXMgd29uJ3QgYmUgYWJsZSB0byBoYW5kbGUgY29tcGxleCBwbHVnaW5zIChlZyBEYXRhVmlldylcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXIocGx1Z2luLCB7IGRhdGE6IG1hcmtkb3duIH0gYXMgTWFya2Rvd25WaWV3LCBmaWxlLCBuZXdQYXJlbnRGaWxlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzcGFuLm91dGVySFRNTCA9IGh0bWw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlIGlmIGl0IGNhbid0IGJlIGxvYWRlZFxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiUXVpcCBwbHVnaW4gZW5jb3VudGVyZWQgYW4gZXJyb3IgdHJ5aW5nIHRvIGxvYWQgYW4gZW1iZWRkZWQgbm90ZTogXCIgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBSZW1vdmUgWUFNTCBmcm9udG1hdHRlciBmcm9tIHRoZSBvdXRwdXRcbiAgICBpZiAocGx1Z2luLnNldHRpbmdzLnJlbW92ZVlBTUwpIHtcbiAgICAgICAgQXJyYXkuZnJvbSh3cmFwcGVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mcm9udG1hdHRlciwgLmZyb250bWF0dGVyLWNvbnRhaW5lcicpKVxuICAgICAgICAgICAgLmZvckVhY2goZWwgPT4gd3JhcHBlci5yZW1vdmVDaGlsZChlbCkpO1xuICAgIH1cbn1cblxuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiByZW5kZXIgKHBsdWdpbjogUXVpcFBsdWdpbiwgdmlldzogTWFya2Rvd25WaWV3LFxuICAgIGlucHV0RmlsZTogVEZpbGUsIHBhcmVudEZpbGVzOiBzdHJpbmdbXSA9IFtdKTpcbiAgICBQcm9taXNlPHN0cmluZz5cbntcbiAgICAvLyBVc2UgT2JzaWRpYW4ncyBtYXJrZG93biByZW5kZXJlciB0byByZW5kZXIgdG8gYSBoaWRkZW4gPGRpdj5cbiAgICBjb25zdCBtYXJrZG93biA9IHZpZXcuZGF0YTtcbiAgICBjb25zdCB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgd3JhcHBlci5zdHlsZS5kaXNwbGF5ID0gJ2hpZGRlbic7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh3cmFwcGVyKTtcbiAgICBjb25zdCBzb3VyY2VQYXRoID0gaW5wdXRGaWxlLnBhcmVudC5wYXRoO1xuICAgIGF3YWl0IE1hcmtkb3duUmVuZGVyZXIucmVuZGVyTWFya2Rvd24obWFya2Rvd24sIHdyYXBwZXIsIHNvdXJjZVBhdGgsIHZpZXcpO1xuXG4gICAgLy8gUG9zdC1wcm9jZXNzIHRoZSBIVE1MIGluLXBsYWNlXG4gICAgYXdhaXQgcG9zdFByb2Nlc3NSZW5kZXJlZEhUTUwocGx1Z2luLCBpbnB1dEZpbGUsIHdyYXBwZXIsXG4gICAgICAgIHBhcmVudEZpbGVzKTtcbiAgICBjb25zdCBodG1sID0gd3JhcHBlci5pbm5lckhUTUw7XG4gICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZCh3cmFwcGVyKTtcblxuICAgIHJldHVybiBodG1sO1xufSIsICJpbXBvcnQgeyBBcHAsIFN1Z2dlc3RNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFF1aXBBUElDbGllbnQgfSBmcm9tICcuL3F1aXBhcGknO1xuaW1wb3J0IHsgUXVpcFRocmVhZCB9IGZyb20gJy4vbWFpbic7XG5cblxuLyogTW9kYWwgRGlhbG9nIHByZXNlbnQgdG8gdXNlcnMgaW4gdGhlIFwiaW1wb3J0IGRvY3VtZW50IGZyb20gUXVpcFwiIGNvbW1hbmQuXG4gICBQcm9tcHQgd2l0aCBhIHZpZXcgYW5hbGFnb3VzIHRvIHRoZSBcIlJlY2VudHNcIiBwYWdlIGluIHRoZSBxdWlwIHdlYmFwcC5cbiAgIEFzeW5jaHJvbm91c2x5IHNlYXJjaCBmb3Igb3RoZXIgdXNlZnVsIGF1dG9jb21wbGV0ZXMuXG4qL1xuZXhwb3J0IGNsYXNzIEltcG9ydE1vZGFsIGV4dGVuZHMgU3VnZ2VzdE1vZGFsPFF1aXBUaHJlYWQ+IHtcblx0dXJsOiBzdHJpbmc7XG5cdG9uU3VibWl0OiAodXJsOiBzdHJpbmcpID0+IHZvaWQ7XG5cdHF1aXA6IFF1aXBBUElDbGllbnQ7XG5cdHJlY2VudDogUXVpcFRocmVhZFtdO1xuXHRzZWFyY2hpbmc6IGJvb2xlYW47XG5cdHNlYXJjaFF1ZXJ5OiBzdHJpbmc7XG5cdHNlYXJjaFJlc3VsdHM6IFF1aXBUaHJlYWRbXTtcblx0aXNPcGVuOiBib29sZWFuO1xuXHRvbklucHV0OiAoaW5wdXQ6IHN0cmluZykgPT4gdm9pZDtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcXVpcDogUXVpcEFQSUNsaWVudCwgY2FjaGVkX3JlY2VudDogUHJvbWlzZTxRdWlwVGhyZWFkW10+LCBvblN1Ym1pdDogKHJlc3VsdDogc3RyaW5nKSA9PiB2b2lkKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnF1aXAgPSBxdWlwO1xuXHRcdHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcblx0XHR0aGlzLnNldFBsYWNlaG9sZGVyKFwiUXVpcCB0aXRsZSBvciBVUkxcIik7XG5cdFx0dGhpcy5yZWNlbnQgPSBbXTtcblx0XHR0aGlzLmxvYWRSZWNlbnRUaHJlYWRzKGNhY2hlZF9yZWNlbnQpO1xuXHRcdHRoaXMuZW1wdHlTdGF0ZVRleHQgPSBcIkxvYWRpbmcgcmVjZW50IGRvY3VtZW50cyBmcm9tIFF1aXBcIjtcblx0XHR0aGlzLnNlYXJjaGluZyA9IGZhbHNlO1xuXHR9XG5cblx0YXN5bmMgbG9hZFJlY2VudFRocmVhZHMoY2FjaGVkX3JlY2VudDogUHJvbWlzZTxRdWlwVGhyZWFkW10+KSB7XG5cdFx0dGhpcy5yZWNlbnQgPSBhd2FpdCBjYWNoZWRfcmVjZW50O1xuXHRcdHRoaXMuZW1wdHlTdGF0ZVRleHQgPSBcIk5vIG1hdGNoaW5nIGRvY3VtZW50IGZvdW5kXCI7XG5cdFx0aWYgKHRoaXMuaXNPcGVuKSB7XG5cdFx0XHR0aGlzLm9uSW5wdXQodGhpcy5pbnB1dEVsLnZhbHVlKTtcblx0XHR9XG5cdH1cblxuXHRhc3luYyBsb2FkU2VhcmNoUmVzdWx0cyhxdWVyeTogc3RyaW5nKSB7XG5cdFx0dGhpcy5zZWFyY2hpbmcgPSB0cnVlO1xuXHRcdHRoaXMuc2VhcmNoUXVlcnkgPSBxdWVyeTtcblx0XHR0aGlzLnNlYXJjaFJlc3VsdHMgPSBbXTtcblx0XHRmb3IgKGNvbnN0IHRocmVhZF9yZXNwb25zZSBvZiAoYXdhaXQgdGhpcy5xdWlwLnNlYXJjaFRpdGxlcyhxdWVyeSkpKSB7XG5cdFx0XHRjb25zdCB0aHJlYWRfaW5mbyA9IHRocmVhZF9yZXNwb25zZS50aHJlYWQ7XG5cdFx0XHR0aGlzLnNlYXJjaFJlc3VsdHMucHVzaCh0aHJlYWRfaW5mbyk7XG5cdFx0fVxuXHRcdHRoaXMuc2VhcmNoaW5nID0gZmFsc2U7XG5cdFx0aWYgKHRoaXMuaXNPcGVuKSB7XG5cdFx0XHR0aGlzLm9uSW5wdXQodGhpcy5pbnB1dEVsLnZhbHVlKTtcblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm5zIGFsbCBhdmFpbGFibGUgc3VnZ2VzdGlvbnMuXG5cdGdldFN1Z2dlc3Rpb25zKHF1ZXJ5OiBzdHJpbmcpOiBRdWlwVGhyZWFkW10ge1xuXHRcdGlmIChxdWVyeSkge1xuXHRcdFx0Y29uc3QgbG93ZXJfcXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0Y29uc3QgZmlsdGVyID0gKHRocmVhZDogUXVpcFRocmVhZCkgPT4gXG5cdFx0XHRcdFx0dGhyZWFkLmxpbmsudG9Mb3dlckNhc2UoKS5jb250YWlucyhsb3dlcl9xdWVyeSkgfHwgdGhyZWFkPy50aXRsZS50b0xvd2VyQ2FzZSgpLmNvbnRhaW5zKGxvd2VyX3F1ZXJ5KTtcblx0XHRcdC8vIHNlZSBpZiB3ZSBoYXZlIHZpYWJsZSBzZWFyY2ggcmVzdWx0c1xuXHRcdFx0aWYgKHRoaXMuc2VhcmNoUXVlcnkgJiYgbG93ZXJfcXVlcnkuY29udGFpbnModGhpcy5zZWFyY2hRdWVyeS50b0xvd2VyQ2FzZSgpKSkge1xuXHRcdFx0XHRjb25zdCBmaWx0ZXJlZF9yZXN1bHRzID0gdGhpcy5zZWFyY2hSZXN1bHRzLmZpbHRlcihmaWx0ZXIpO1xuXHRcdFx0XHRpZiAoZmlsdGVyZWRfcmVzdWx0cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZpbHRlcmVkX3Jlc3VsdHM7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdC8vIG1heWJlIHdlIGNhbiBmaW5kIGEgbWF0Y2ggaW4gdGhlIHJlY2VudHMgbGlzdD9cblx0XHRcdGNvbnN0IGZpbHRlcmVkX3JlY2VudCA9ICh0aGlzLnJlY2VudCkuZmlsdGVyKGZpbHRlcik7XG5cdFx0XHRpZiAoZmlsdGVyZWRfcmVjZW50Lmxlbmd0aCA+IDApIHtcblx0XHRcdFx0cmV0dXJuIGZpbHRlcmVkX3JlY2VudDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIGtpY2sgb2ZmIGEgcXVlcnksIGlmIGl0J3Mgbm90IHJlZHVuZGFudCwgYnV0IHJlc3BlY3QgdGhlIHF1ZXJ5IGxvY2tcblx0XHRcdFx0aWYgKHF1ZXJ5ICYmIHF1ZXJ5ICE9IHRoaXMuc2VhcmNoUXVlcnkgJiYgIXRoaXMuc2VhcmNoaW5nKSB7XG5cdFx0XHRcdFx0dGhpcy5sb2FkU2VhcmNoUmVzdWx0cyhxdWVyeSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly8gdGhpcyBldmVuIGZpIHRoZSB1c2VyIHBhc3RlcyBvciB0eXBlcyBhIFVSTCwgdGhhdCdzIGEgdmFsaWQgcmVzdWx0LlxuXHRcdFx0XHRyZXR1cm4gW3sgbGluazogcXVlcnkgfV07XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJldHVybiB0aGlzLnJlY2VudDtcblx0XHR9XG5cdH1cblxuXHQvLyBSZW5kZXJzIGVhY2ggc3VnZ2VzdGlvbiBpdGVtLlxuXHRyZW5kZXJTdWdnZXN0aW9uKHRocmVhZDogUXVpcFRocmVhZCwgZWw6IEhUTUxFbGVtZW50KSB7XG5cdFx0ZWwuY3JlYXRlRWwoXCJkaXZcIiwgeyB0ZXh0OiB0aHJlYWQudGl0bGUgfSk7XG5cdFx0ZWwuY3JlYXRlRWwoXCJzbWFsbFwiLCB7IHRleHQ6IHRocmVhZC5saW5rIH0pO1xuXHR9XG5cblx0b25DaG9vc2VTdWdnZXN0aW9uKHRocmVhZDogUXVpcFRocmVhZCwgZXZ0OiBNb3VzZUV2ZW50IHwgS2V5Ym9hcmRFdmVudCkge1xuXHRcdGlmICh0aHJlYWQubGluaykge1xuXHRcdFx0dGhpcy5vblN1Ym1pdCh0aHJlYWQubGluayk7XG5cdFx0fVxuXHR9XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcblxuXG5cbmV4cG9ydCBjbGFzcyBTdWNjZXNzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGxpbms6IHN0cmluZztcblx0bWVzc2FnZT86IHN0cmluZztcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgbGluazogc3RyaW5nLCBtZXNzYWdlPzogc3RyaW5nKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLmxpbmsgPSBsaW5rO1xuXHRcdHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdoMycsIG51bGwsIChlbCkgPT4ge1xuXHRcdFx0ZWwuaW5uZXJUZXh0ID0gJ1N1Y2Nlc3NmdWxseSBwdWJsaXNoZWQgdG8gJztcblx0XHRcdGVsLmNyZWF0ZUVsKCdhJywgbnVsbCwgKGFuY2hvcikgPT4ge1xuXHRcdFx0XHRhbmNob3IuaHJlZiA9IHRoaXMubGluaztcblx0XHRcdFx0YW5jaG9yLmlubmVyVGV4dCA9IHRoaXMubGluaztcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHRcdGlmICh0aGlzLm1lc3NhZ2UpIHtcblx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIG51bGwsIChlbCkgPT4ge1xuXHRcdFx0XHRlbC5pbm5lclRleHQgPSB0aGlzLm1lc3NhZ2U7XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHsgQXBwLCBwYXJzZUZyb250TWF0dGVyRW50cnksIHNhbml0aXplSFRNTFRvRG9tLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFF1aXBBUElDbGllbnQgfSBmcm9tICcuL3F1aXBhcGknO1xuaW1wb3J0IFR1cm5kb3duU2VydmljZSBmcm9tICd0dXJuZG93bic7XG5pbXBvcnQgeyBnZm0gfSBmcm9tICd0dXJuZG93bi1wbHVnaW4tZ2ZtJztcbmltcG9ydCB7IEFwcEhlbHBlciB9IGZyb20gJy4vQXBwSGVscGVyJztcbmltcG9ydCBRdWlwUGx1Z2luLCB7IFF1aXBUaHJlYWQgfSBmcm9tICcuL21haW4nO1xuXG5leHBvcnQgY2xhc3MgSW1wb3J0ZXIge1xuXHRjbGllbnQ6IFF1aXBBUElDbGllbnQ7XG5cdHRkOiBUdXJuZG93blNlcnZpY2U7XG5cdGFwcDogQXBwO1xuXHRoZWxwZXI6IEFwcEhlbHBlcjtcblx0aG9zdG5hbWU6IHN0cmluZztcblxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IFF1aXBQbHVnaW4pIHtcblx0XHR0aGlzLmhvc3RuYW1lID0gcGx1Z2luLnNldHRpbmdzLmhvc3RuYW1lO1xuXHRcdHRoaXMuY2xpZW50ID0gbmV3IFF1aXBBUElDbGllbnQocGx1Z2luLnNldHRpbmdzLmhvc3RuYW1lLCBwbHVnaW4uc2V0dGluZ3MudG9rZW4pO1xuXHRcdHRoaXMudGQgPSBuZXcgVHVybmRvd25TZXJ2aWNlKHtcblx0XHRcdGhlYWRpbmdTdHlsZTogXCJhdHhcIixcblx0XHRcdGhyOiAnKioqJyxcblx0XHRcdGJ1bGxldExpc3RNYXJrZXI6ICctJyxcblx0XHRcdGNvZGVCbG9ja1N0eWxlOiAnZmVuY2VkJyxcblx0XHR9KTtcblx0XHR0aGlzLnRkLnVzZShnZm0pO1xuXHRcdHRoaXMuYXBwID0gcGx1Z2luLmFwcDtcblx0XHR0aGlzLmhlbHBlciA9IG5ldyBBcHBIZWxwZXIocGx1Z2luLmFwcCk7XG5cdH1cblxuXHRhc3luYyBwcm9jZXNzX0EoYW5jaG9yOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnN0IGhyZWYgPSBhbmNob3IuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG5cdFx0aWYgKGhyZWYgJiYgdGhpcy5ob3N0bmFtZS5jb250YWlucyhuZXcgVVJMKGhyZWYpLmhvc3RuYW1lKSkge1xuXHRcdFx0Ly8gdHJ5IHRvIHJlbWFwIGxpbmsgdG8gcmVsZXZhbnQgT2JzaWRpYW4gbm90ZSwgaWYgb25lIGV4aXN0c1xuXHRcdFx0Y29uc3Qgc2VjcmV0X3BhdGggPSBocmVmLnNwbGl0KCcuY29tLycsIDIpLmF0KDEpLnNwbGl0KCcvJykuYXQoMCk7XG5cdFx0XHRjb25zdCB0aXRsZSA9IGFuY2hvci5pbm5lclRleHQ7XG5cdFx0XHRjb25zdCBmaWxlID0gYXdhaXQgdGhpcy5oZWxwZXIuZ2V0Tm90ZUJ5VGl0bGUodGl0bGUpO1xuXHRcdFx0aWYgKGZpbGUpIHtcblx0XHRcdFx0Y29uc3QgZnJvbnRtYXR0ZXIgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldENhY2hlKGZpbGUucGF0aCkuZnJvbnRtYXR0ZXI7XG5cdFx0XHRcdGlmIChmcm9udG1hdHRlcikge1xuXHRcdFx0XHRcdGNvbnN0IHF1aXAgPSBwYXJzZUZyb250TWF0dGVyRW50cnkoZnJvbnRtYXR0ZXIsIFwicXVpcFwiKTtcblx0XHRcdFx0XHRpZiAocXVpcCAmJiBxdWlwLmNvbnRhaW5zKHNlY3JldF9wYXRoKSkge1xuXHRcdFx0XHRcdFx0YW5jaG9yLnNldEF0dHJpYnV0ZSgnaHJlZicsIGVuY29kZVVSSUNvbXBvbmVudChmaWxlLnBhdGgpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRhc3luYyBwcm9jZXNzX0lNRyhpbWc6IEhUTUxFbGVtZW50LCBpbmZvOiBRdWlwVGhyZWFkKSB7XG5cdFx0Y29uc3Qgc3JjID0gaW1nLmdldEF0dHJpYnV0ZSgnc3JjJyk7XG5cdFx0aWYgKHNyYykge1xuXHRcdFx0Y29uc3QgYmxvYiA9IGF3YWl0IHRoaXMuY2xpZW50LmdldEJsb2Ioc3JjKTtcblx0XHRcdGNvbnN0IGZpbGVuYW1lX2Jhc2UgPSBgJHtpbmZvLnRpdGxlLnJlcGxhY2VBbGwoJyAnLCAnXycpfSR7c3JjLnJlcGxhY2VBbGwoJy8nLCAnLScpfWA7XG5cdFx0XHRjb25zdCBmaWxlbmFtZSA9IGF3YWl0IHRoaXMuaGVscGVyLmNyZWF0ZU9yTW9kaWZ5QmluYXJ5KGZpbGVuYW1lX2Jhc2UsIGJsb2IpO1xuXHRcdFx0aW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgZmlsZW5hbWUpO1xuXHRcdH1cblx0fVxuXG5cdC8vIEltcG9ydCBhIFF1aXAgZG9jdW1lbnQgaW50byBhbiBPYnNpZGlhbiBub3RlXG5cdGFzeW5jIGltcG9ydEhUTUwodXJsOiBzdHJpbmcsIGFjdGl2ZV9maWxlPzogVEZpbGUpIHtcblx0XHRjb25zdCBzZWNyZXRfcGF0aCA9IHVybC5zcGxpdCgnLmNvbS8nLCAyKS5hdCgxKS5zcGxpdCgnLycpLmF0KDApO1xuXHRcdGNvbnN0IGh0bWwgPSBhd2FpdCB0aGlzLmNsaWVudC5nZXREb2N1bWVudEhUTUwoc2VjcmV0X3BhdGgpO1xuXHRcdGNvbnN0IGluZm8gPSAoYXdhaXQgdGhpcy5jbGllbnQuZ2V0VGhyZWFkKHNlY3JldF9wYXRoKSkudGhyZWFkO1xuXHRcdGNvbnN0IGZyYWdtZW50ID0gc2FuaXRpemVIVE1MVG9Eb20oaHRtbCk7XG5cdFx0Zm9yIChjb25zdCBhbmNob3Igb2YgQXJyYXkuZnJvbShmcmFnbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdhJykpKSB7XG5cdFx0XHRhd2FpdCB0aGlzLnByb2Nlc3NfQShhbmNob3IpO1xuXHRcdH1cblx0XHRmb3IgKGNvbnN0IGltZyBvZiBBcnJheS5mcm9tKGZyYWdtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ2ltZycpKSkge1xuXHRcdFx0YXdhaXQgdGhpcy5wcm9jZXNzX0lNRyhpbWcsIGluZm8pO1xuXHRcdH1cblx0XHRjb25zdCBtYXJrZG93biA9IHRoaXMudGQudHVybmRvd24oZnJhZ21lbnQpO1xuXHRcdGNvbnN0IGZyb250X21hdHRlciA9IHtcblx0XHRcdHRpdGxlOiBpbmZvLnRpdGxlLFxuXHRcdFx0cXVpcDogdXJsLFxuXHRcdFx0cXVpcF90aHJlYWRfaW1wb3J0ZWQ6IHtcblx0XHRcdFx0aWQ6IGluZm8uaWQsXG5cdFx0XHRcdHVwZGF0ZWRfdXNlYzogMCxcblx0XHRcdFx0dXBkYXRlZF9kYXRldGltZTogJydcblx0XHRcdH1cblx0XHR9O1xuXHRcdGlmIChpbmZvLnVwZGF0ZWRfdXNlYykge1xuXHRcdFx0ZnJvbnRfbWF0dGVyLnF1aXBfdGhyZWFkX2ltcG9ydGVkLnVwZGF0ZWRfdXNlYyA9IGluZm8udXBkYXRlZF91c2VjO1xuXHRcdFx0ZnJvbnRfbWF0dGVyLnF1aXBfdGhyZWFkX2ltcG9ydGVkLnVwZGF0ZWRfZGF0ZXRpbWUgPSBuZXcgRGF0ZShpbmZvLnVwZGF0ZWRfdXNlYyAvIDEwMDApLnRvTG9jYWxlU3RyaW5nKCk7XG5cdFx0fVxuXHRcdGlmICh0eXBlb2YgYWN0aXZlX2ZpbGUgPT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRjb25zdCBmaWxlID0gdGhpcy5oZWxwZXIuY3JlYXRlT3JNb2RpZnlOb3RlKGluZm8udGl0bGUsIG1hcmtkb3duLCBmcm9udF9tYXR0ZXIpO1xuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpLm9wZW5GaWxlKGF3YWl0IGZpbGUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmhlbHBlci51cGRhdGVOb3RlKGFjdGl2ZV9maWxlLCBtYXJrZG93biwgZnJvbnRfbWF0dGVyKTtcblx0XHR9XG5cdH1cbn1cbiIsICJmdW5jdGlvbiBleHRlbmQgKGRlc3RpbmF0aW9uKSB7XG4gIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcbiAgICBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7XG4gICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KGtleSkpIGRlc3RpbmF0aW9uW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRlc3RpbmF0aW9uXG59XG5cbmZ1bmN0aW9uIHJlcGVhdCAoY2hhcmFjdGVyLCBjb3VudCkge1xuICByZXR1cm4gQXJyYXkoY291bnQgKyAxKS5qb2luKGNoYXJhY3Rlcilcbn1cblxuZnVuY3Rpb24gdHJpbUxlYWRpbmdOZXdsaW5lcyAoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXlxcbiovLCAnJylcbn1cblxuZnVuY3Rpb24gdHJpbVRyYWlsaW5nTmV3bGluZXMgKHN0cmluZykge1xuICAvLyBhdm9pZCBtYXRjaC1hdC1lbmQgcmVnZXhwIGJvdHRsZW5lY2ssIHNlZSAjMzcwXG4gIHZhciBpbmRleEVuZCA9IHN0cmluZy5sZW5ndGg7XG4gIHdoaWxlIChpbmRleEVuZCA+IDAgJiYgc3RyaW5nW2luZGV4RW5kIC0gMV0gPT09ICdcXG4nKSBpbmRleEVuZC0tO1xuICByZXR1cm4gc3RyaW5nLnN1YnN0cmluZygwLCBpbmRleEVuZClcbn1cblxudmFyIGJsb2NrRWxlbWVudHMgPSBbXG4gICdBRERSRVNTJywgJ0FSVElDTEUnLCAnQVNJREUnLCAnQVVESU8nLCAnQkxPQ0tRVU9URScsICdCT0RZJywgJ0NBTlZBUycsXG4gICdDRU5URVInLCAnREQnLCAnRElSJywgJ0RJVicsICdETCcsICdEVCcsICdGSUVMRFNFVCcsICdGSUdDQVBUSU9OJywgJ0ZJR1VSRScsXG4gICdGT09URVInLCAnRk9STScsICdGUkFNRVNFVCcsICdIMScsICdIMicsICdIMycsICdINCcsICdINScsICdINicsICdIRUFERVInLFxuICAnSEdST1VQJywgJ0hSJywgJ0hUTUwnLCAnSVNJTkRFWCcsICdMSScsICdNQUlOJywgJ01FTlUnLCAnTkFWJywgJ05PRlJBTUVTJyxcbiAgJ05PU0NSSVBUJywgJ09MJywgJ09VVFBVVCcsICdQJywgJ1BSRScsICdTRUNUSU9OJywgJ1RBQkxFJywgJ1RCT0RZJywgJ1REJyxcbiAgJ1RGT09UJywgJ1RIJywgJ1RIRUFEJywgJ1RSJywgJ1VMJ1xuXTtcblxuZnVuY3Rpb24gaXNCbG9jayAobm9kZSkge1xuICByZXR1cm4gaXMobm9kZSwgYmxvY2tFbGVtZW50cylcbn1cblxudmFyIHZvaWRFbGVtZW50cyA9IFtcbiAgJ0FSRUEnLCAnQkFTRScsICdCUicsICdDT0wnLCAnQ09NTUFORCcsICdFTUJFRCcsICdIUicsICdJTUcnLCAnSU5QVVQnLFxuICAnS0VZR0VOJywgJ0xJTksnLCAnTUVUQScsICdQQVJBTScsICdTT1VSQ0UnLCAnVFJBQ0snLCAnV0JSJ1xuXTtcblxuZnVuY3Rpb24gaXNWb2lkIChub2RlKSB7XG4gIHJldHVybiBpcyhub2RlLCB2b2lkRWxlbWVudHMpXG59XG5cbmZ1bmN0aW9uIGhhc1ZvaWQgKG5vZGUpIHtcbiAgcmV0dXJuIGhhcyhub2RlLCB2b2lkRWxlbWVudHMpXG59XG5cbnZhciBtZWFuaW5nZnVsV2hlbkJsYW5rRWxlbWVudHMgPSBbXG4gICdBJywgJ1RBQkxFJywgJ1RIRUFEJywgJ1RCT0RZJywgJ1RGT09UJywgJ1RIJywgJ1REJywgJ0lGUkFNRScsICdTQ1JJUFQnLFxuICAnQVVESU8nLCAnVklERU8nXG5dO1xuXG5mdW5jdGlvbiBpc01lYW5pbmdmdWxXaGVuQmxhbmsgKG5vZGUpIHtcbiAgcmV0dXJuIGlzKG5vZGUsIG1lYW5pbmdmdWxXaGVuQmxhbmtFbGVtZW50cylcbn1cblxuZnVuY3Rpb24gaGFzTWVhbmluZ2Z1bFdoZW5CbGFuayAobm9kZSkge1xuICByZXR1cm4gaGFzKG5vZGUsIG1lYW5pbmdmdWxXaGVuQmxhbmtFbGVtZW50cylcbn1cblxuZnVuY3Rpb24gaXMgKG5vZGUsIHRhZ05hbWVzKSB7XG4gIHJldHVybiB0YWdOYW1lcy5pbmRleE9mKG5vZGUubm9kZU5hbWUpID49IDBcbn1cblxuZnVuY3Rpb24gaGFzIChub2RlLCB0YWdOYW1lcykge1xuICByZXR1cm4gKFxuICAgIG5vZGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUgJiZcbiAgICB0YWdOYW1lcy5zb21lKGZ1bmN0aW9uICh0YWdOYW1lKSB7XG4gICAgICByZXR1cm4gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWdOYW1lKS5sZW5ndGhcbiAgICB9KVxuICApXG59XG5cbnZhciBydWxlcyA9IHt9O1xuXG5ydWxlcy5wYXJhZ3JhcGggPSB7XG4gIGZpbHRlcjogJ3AnLFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCkge1xuICAgIHJldHVybiAnXFxuXFxuJyArIGNvbnRlbnQgKyAnXFxuXFxuJ1xuICB9XG59O1xuXG5ydWxlcy5saW5lQnJlYWsgPSB7XG4gIGZpbHRlcjogJ2JyJyxcblxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gb3B0aW9ucy5iciArICdcXG4nXG4gIH1cbn07XG5cbnJ1bGVzLmhlYWRpbmcgPSB7XG4gIGZpbHRlcjogWydoMScsICdoMicsICdoMycsICdoNCcsICdoNScsICdoNiddLFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSwgb3B0aW9ucykge1xuICAgIHZhciBoTGV2ZWwgPSBOdW1iZXIobm9kZS5ub2RlTmFtZS5jaGFyQXQoMSkpO1xuXG4gICAgaWYgKG9wdGlvbnMuaGVhZGluZ1N0eWxlID09PSAnc2V0ZXh0JyAmJiBoTGV2ZWwgPCAzKSB7XG4gICAgICB2YXIgdW5kZXJsaW5lID0gcmVwZWF0KChoTGV2ZWwgPT09IDEgPyAnPScgOiAnLScpLCBjb250ZW50Lmxlbmd0aCk7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAnXFxuXFxuJyArIGNvbnRlbnQgKyAnXFxuJyArIHVuZGVybGluZSArICdcXG5cXG4nXG4gICAgICApXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnXFxuXFxuJyArIHJlcGVhdCgnIycsIGhMZXZlbCkgKyAnICcgKyBjb250ZW50ICsgJ1xcblxcbidcbiAgICB9XG4gIH1cbn07XG5cbnJ1bGVzLmJsb2NrcXVvdGUgPSB7XG4gIGZpbHRlcjogJ2Jsb2NrcXVvdGUnLFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCkge1xuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoL15cXG4rfFxcbiskL2csICcnKTtcbiAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC9eL2dtLCAnPiAnKTtcbiAgICByZXR1cm4gJ1xcblxcbicgKyBjb250ZW50ICsgJ1xcblxcbidcbiAgfVxufTtcblxucnVsZXMubGlzdCA9IHtcbiAgZmlsdGVyOiBbJ3VsJywgJ29sJ10sXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlKSB7XG4gICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICBpZiAocGFyZW50Lm5vZGVOYW1lID09PSAnTEknICYmIHBhcmVudC5sYXN0RWxlbWVudENoaWxkID09PSBub2RlKSB7XG4gICAgICByZXR1cm4gJ1xcbicgKyBjb250ZW50XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnXFxuXFxuJyArIGNvbnRlbnQgKyAnXFxuXFxuJ1xuICAgIH1cbiAgfVxufTtcblxucnVsZXMubGlzdEl0ZW0gPSB7XG4gIGZpbHRlcjogJ2xpJyxcblxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICBjb250ZW50ID0gY29udGVudFxuICAgICAgLnJlcGxhY2UoL15cXG4rLywgJycpIC8vIHJlbW92ZSBsZWFkaW5nIG5ld2xpbmVzXG4gICAgICAucmVwbGFjZSgvXFxuKyQvLCAnXFxuJykgLy8gcmVwbGFjZSB0cmFpbGluZyBuZXdsaW5lcyB3aXRoIGp1c3QgYSBzaW5nbGUgb25lXG4gICAgICAucmVwbGFjZSgvXFxuL2dtLCAnXFxuICAgICcpOyAvLyBpbmRlbnRcbiAgICB2YXIgcHJlZml4ID0gb3B0aW9ucy5idWxsZXRMaXN0TWFya2VyICsgJyAgICc7XG4gICAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgICBpZiAocGFyZW50Lm5vZGVOYW1lID09PSAnT0wnKSB7XG4gICAgICB2YXIgc3RhcnQgPSBwYXJlbnQuZ2V0QXR0cmlidXRlKCdzdGFydCcpO1xuICAgICAgdmFyIGluZGV4ID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChwYXJlbnQuY2hpbGRyZW4sIG5vZGUpO1xuICAgICAgcHJlZml4ID0gKHN0YXJ0ID8gTnVtYmVyKHN0YXJ0KSArIGluZGV4IDogaW5kZXggKyAxKSArICcuICAnO1xuICAgIH1cbiAgICByZXR1cm4gKFxuICAgICAgcHJlZml4ICsgY29udGVudCArIChub2RlLm5leHRTaWJsaW5nICYmICEvXFxuJC8udGVzdChjb250ZW50KSA/ICdcXG4nIDogJycpXG4gICAgKVxuICB9XG59O1xuXG5ydWxlcy5pbmRlbnRlZENvZGVCbG9jayA9IHtcbiAgZmlsdGVyOiBmdW5jdGlvbiAobm9kZSwgb3B0aW9ucykge1xuICAgIHJldHVybiAoXG4gICAgICBvcHRpb25zLmNvZGVCbG9ja1N0eWxlID09PSAnaW5kZW50ZWQnICYmXG4gICAgICBub2RlLm5vZGVOYW1lID09PSAnUFJFJyAmJlxuICAgICAgbm9kZS5maXJzdENoaWxkICYmXG4gICAgICBub2RlLmZpcnN0Q2hpbGQubm9kZU5hbWUgPT09ICdDT0RFJ1xuICAgIClcbiAgfSxcblxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgJ1xcblxcbiAgICAnICtcbiAgICAgIG5vZGUuZmlyc3RDaGlsZC50ZXh0Q29udGVudC5yZXBsYWNlKC9cXG4vZywgJ1xcbiAgICAnKSArXG4gICAgICAnXFxuXFxuJ1xuICAgIClcbiAgfVxufTtcblxucnVsZXMuZmVuY2VkQ29kZUJsb2NrID0ge1xuICBmaWx0ZXI6IGZ1bmN0aW9uIChub2RlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIG9wdGlvbnMuY29kZUJsb2NrU3R5bGUgPT09ICdmZW5jZWQnICYmXG4gICAgICBub2RlLm5vZGVOYW1lID09PSAnUFJFJyAmJlxuICAgICAgbm9kZS5maXJzdENoaWxkICYmXG4gICAgICBub2RlLmZpcnN0Q2hpbGQubm9kZU5hbWUgPT09ICdDT0RFJ1xuICAgIClcbiAgfSxcblxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gbm9kZS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSB8fCAnJztcbiAgICB2YXIgbGFuZ3VhZ2UgPSAoY2xhc3NOYW1lLm1hdGNoKC9sYW5ndWFnZS0oXFxTKykvKSB8fCBbbnVsbCwgJyddKVsxXTtcbiAgICB2YXIgY29kZSA9IG5vZGUuZmlyc3RDaGlsZC50ZXh0Q29udGVudDtcblxuICAgIHZhciBmZW5jZUNoYXIgPSBvcHRpb25zLmZlbmNlLmNoYXJBdCgwKTtcbiAgICB2YXIgZmVuY2VTaXplID0gMztcbiAgICB2YXIgZmVuY2VJbkNvZGVSZWdleCA9IG5ldyBSZWdFeHAoJ14nICsgZmVuY2VDaGFyICsgJ3szLH0nLCAnZ20nKTtcblxuICAgIHZhciBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gZmVuY2VJbkNvZGVSZWdleC5leGVjKGNvZGUpKSkge1xuICAgICAgaWYgKG1hdGNoWzBdLmxlbmd0aCA+PSBmZW5jZVNpemUpIHtcbiAgICAgICAgZmVuY2VTaXplID0gbWF0Y2hbMF0ubGVuZ3RoICsgMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgZmVuY2UgPSByZXBlYXQoZmVuY2VDaGFyLCBmZW5jZVNpemUpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgICdcXG5cXG4nICsgZmVuY2UgKyBsYW5ndWFnZSArICdcXG4nICtcbiAgICAgIGNvZGUucmVwbGFjZSgvXFxuJC8sICcnKSArXG4gICAgICAnXFxuJyArIGZlbmNlICsgJ1xcblxcbidcbiAgICApXG4gIH1cbn07XG5cbnJ1bGVzLmhvcml6b250YWxSdWxlID0ge1xuICBmaWx0ZXI6ICdocicsXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuICdcXG5cXG4nICsgb3B0aW9ucy5ociArICdcXG5cXG4nXG4gIH1cbn07XG5cbnJ1bGVzLmlubGluZUxpbmsgPSB7XG4gIGZpbHRlcjogZnVuY3Rpb24gKG5vZGUsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gKFxuICAgICAgb3B0aW9ucy5saW5rU3R5bGUgPT09ICdpbmxpbmVkJyAmJlxuICAgICAgbm9kZS5ub2RlTmFtZSA9PT0gJ0EnICYmXG4gICAgICBub2RlLmdldEF0dHJpYnV0ZSgnaHJlZicpXG4gICAgKVxuICB9LFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSkge1xuICAgIHZhciBocmVmID0gbm9kZS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICB2YXIgdGl0bGUgPSBjbGVhbkF0dHJpYnV0ZShub2RlLmdldEF0dHJpYnV0ZSgndGl0bGUnKSk7XG4gICAgaWYgKHRpdGxlKSB0aXRsZSA9ICcgXCInICsgdGl0bGUgKyAnXCInO1xuICAgIHJldHVybiAnWycgKyBjb250ZW50ICsgJ10oJyArIGhyZWYgKyB0aXRsZSArICcpJ1xuICB9XG59O1xuXG5ydWxlcy5yZWZlcmVuY2VMaW5rID0ge1xuICBmaWx0ZXI6IGZ1bmN0aW9uIChub2RlLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIG9wdGlvbnMubGlua1N0eWxlID09PSAncmVmZXJlbmNlZCcgJiZcbiAgICAgIG5vZGUubm9kZU5hbWUgPT09ICdBJyAmJlxuICAgICAgbm9kZS5nZXRBdHRyaWJ1dGUoJ2hyZWYnKVxuICAgIClcbiAgfSxcblxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICB2YXIgaHJlZiA9IG5vZGUuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgdmFyIHRpdGxlID0gY2xlYW5BdHRyaWJ1dGUobm9kZS5nZXRBdHRyaWJ1dGUoJ3RpdGxlJykpO1xuICAgIGlmICh0aXRsZSkgdGl0bGUgPSAnIFwiJyArIHRpdGxlICsgJ1wiJztcbiAgICB2YXIgcmVwbGFjZW1lbnQ7XG4gICAgdmFyIHJlZmVyZW5jZTtcblxuICAgIHN3aXRjaCAob3B0aW9ucy5saW5rUmVmZXJlbmNlU3R5bGUpIHtcbiAgICAgIGNhc2UgJ2NvbGxhcHNlZCc6XG4gICAgICAgIHJlcGxhY2VtZW50ID0gJ1snICsgY29udGVudCArICddW10nO1xuICAgICAgICByZWZlcmVuY2UgPSAnWycgKyBjb250ZW50ICsgJ106ICcgKyBocmVmICsgdGl0bGU7XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzaG9ydGN1dCc6XG4gICAgICAgIHJlcGxhY2VtZW50ID0gJ1snICsgY29udGVudCArICddJztcbiAgICAgICAgcmVmZXJlbmNlID0gJ1snICsgY29udGVudCArICddOiAnICsgaHJlZiArIHRpdGxlO1xuICAgICAgICBicmVha1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdmFyIGlkID0gdGhpcy5yZWZlcmVuY2VzLmxlbmd0aCArIDE7XG4gICAgICAgIHJlcGxhY2VtZW50ID0gJ1snICsgY29udGVudCArICddWycgKyBpZCArICddJztcbiAgICAgICAgcmVmZXJlbmNlID0gJ1snICsgaWQgKyAnXTogJyArIGhyZWYgKyB0aXRsZTtcbiAgICB9XG5cbiAgICB0aGlzLnJlZmVyZW5jZXMucHVzaChyZWZlcmVuY2UpO1xuICAgIHJldHVybiByZXBsYWNlbWVudFxuICB9LFxuXG4gIHJlZmVyZW5jZXM6IFtdLFxuXG4gIGFwcGVuZDogZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICB2YXIgcmVmZXJlbmNlcyA9ICcnO1xuICAgIGlmICh0aGlzLnJlZmVyZW5jZXMubGVuZ3RoKSB7XG4gICAgICByZWZlcmVuY2VzID0gJ1xcblxcbicgKyB0aGlzLnJlZmVyZW5jZXMuam9pbignXFxuJykgKyAnXFxuXFxuJztcbiAgICAgIHRoaXMucmVmZXJlbmNlcyA9IFtdOyAvLyBSZXNldCByZWZlcmVuY2VzXG4gICAgfVxuICAgIHJldHVybiByZWZlcmVuY2VzXG4gIH1cbn07XG5cbnJ1bGVzLmVtcGhhc2lzID0ge1xuICBmaWx0ZXI6IFsnZW0nLCAnaSddLFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSwgb3B0aW9ucykge1xuICAgIGlmICghY29udGVudC50cmltKCkpIHJldHVybiAnJ1xuICAgIHJldHVybiBvcHRpb25zLmVtRGVsaW1pdGVyICsgY29udGVudCArIG9wdGlvbnMuZW1EZWxpbWl0ZXJcbiAgfVxufTtcblxucnVsZXMuc3Ryb25nID0ge1xuICBmaWx0ZXI6IFsnc3Ryb25nJywgJ2InXSxcblxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUsIG9wdGlvbnMpIHtcbiAgICBpZiAoIWNvbnRlbnQudHJpbSgpKSByZXR1cm4gJydcbiAgICByZXR1cm4gb3B0aW9ucy5zdHJvbmdEZWxpbWl0ZXIgKyBjb250ZW50ICsgb3B0aW9ucy5zdHJvbmdEZWxpbWl0ZXJcbiAgfVxufTtcblxucnVsZXMuY29kZSA9IHtcbiAgZmlsdGVyOiBmdW5jdGlvbiAobm9kZSkge1xuICAgIHZhciBoYXNTaWJsaW5ncyA9IG5vZGUucHJldmlvdXNTaWJsaW5nIHx8IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgdmFyIGlzQ29kZUJsb2NrID0gbm9kZS5wYXJlbnROb2RlLm5vZGVOYW1lID09PSAnUFJFJyAmJiAhaGFzU2libGluZ3M7XG5cbiAgICByZXR1cm4gbm9kZS5ub2RlTmFtZSA9PT0gJ0NPREUnICYmICFpc0NvZGVCbG9ja1xuICB9LFxuXG4gIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCkge1xuICAgIGlmICghY29udGVudCkgcmV0dXJuICcnXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFxyP1xcbnxcXHIvZywgJyAnKTtcblxuICAgIHZhciBleHRyYVNwYWNlID0gL15gfF4gLio/W14gXS4qICR8YCQvLnRlc3QoY29udGVudCkgPyAnICcgOiAnJztcbiAgICB2YXIgZGVsaW1pdGVyID0gJ2AnO1xuICAgIHZhciBtYXRjaGVzID0gY29udGVudC5tYXRjaCgvYCsvZ20pIHx8IFtdO1xuICAgIHdoaWxlIChtYXRjaGVzLmluZGV4T2YoZGVsaW1pdGVyKSAhPT0gLTEpIGRlbGltaXRlciA9IGRlbGltaXRlciArICdgJztcblxuICAgIHJldHVybiBkZWxpbWl0ZXIgKyBleHRyYVNwYWNlICsgY29udGVudCArIGV4dHJhU3BhY2UgKyBkZWxpbWl0ZXJcbiAgfVxufTtcblxucnVsZXMuaW1hZ2UgPSB7XG4gIGZpbHRlcjogJ2ltZycsXG5cbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlKSB7XG4gICAgdmFyIGFsdCA9IGNsZWFuQXR0cmlidXRlKG5vZGUuZ2V0QXR0cmlidXRlKCdhbHQnKSk7XG4gICAgdmFyIHNyYyA9IG5vZGUuZ2V0QXR0cmlidXRlKCdzcmMnKSB8fCAnJztcbiAgICB2YXIgdGl0bGUgPSBjbGVhbkF0dHJpYnV0ZShub2RlLmdldEF0dHJpYnV0ZSgndGl0bGUnKSk7XG4gICAgdmFyIHRpdGxlUGFydCA9IHRpdGxlID8gJyBcIicgKyB0aXRsZSArICdcIicgOiAnJztcbiAgICByZXR1cm4gc3JjID8gJyFbJyArIGFsdCArICddJyArICcoJyArIHNyYyArIHRpdGxlUGFydCArICcpJyA6ICcnXG4gIH1cbn07XG5cbmZ1bmN0aW9uIGNsZWFuQXR0cmlidXRlIChhdHRyaWJ1dGUpIHtcbiAgcmV0dXJuIGF0dHJpYnV0ZSA/IGF0dHJpYnV0ZS5yZXBsYWNlKC8oXFxuK1xccyopKy9nLCAnXFxuJykgOiAnJ1xufVxuXG4vKipcbiAqIE1hbmFnZXMgYSBjb2xsZWN0aW9uIG9mIHJ1bGVzIHVzZWQgdG8gY29udmVydCBIVE1MIHRvIE1hcmtkb3duXG4gKi9cblxuZnVuY3Rpb24gUnVsZXMgKG9wdGlvbnMpIHtcbiAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgdGhpcy5fa2VlcCA9IFtdO1xuICB0aGlzLl9yZW1vdmUgPSBbXTtcblxuICB0aGlzLmJsYW5rUnVsZSA9IHtcbiAgICByZXBsYWNlbWVudDogb3B0aW9ucy5ibGFua1JlcGxhY2VtZW50XG4gIH07XG5cbiAgdGhpcy5rZWVwUmVwbGFjZW1lbnQgPSBvcHRpb25zLmtlZXBSZXBsYWNlbWVudDtcblxuICB0aGlzLmRlZmF1bHRSdWxlID0ge1xuICAgIHJlcGxhY2VtZW50OiBvcHRpb25zLmRlZmF1bHRSZXBsYWNlbWVudFxuICB9O1xuXG4gIHRoaXMuYXJyYXkgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIG9wdGlvbnMucnVsZXMpIHRoaXMuYXJyYXkucHVzaChvcHRpb25zLnJ1bGVzW2tleV0pO1xufVxuXG5SdWxlcy5wcm90b3R5cGUgPSB7XG4gIGFkZDogZnVuY3Rpb24gKGtleSwgcnVsZSkge1xuICAgIHRoaXMuYXJyYXkudW5zaGlmdChydWxlKTtcbiAgfSxcblxuICBrZWVwOiBmdW5jdGlvbiAoZmlsdGVyKSB7XG4gICAgdGhpcy5fa2VlcC51bnNoaWZ0KHtcbiAgICAgIGZpbHRlcjogZmlsdGVyLFxuICAgICAgcmVwbGFjZW1lbnQ6IHRoaXMua2VlcFJlcGxhY2VtZW50XG4gICAgfSk7XG4gIH0sXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiAoZmlsdGVyKSB7XG4gICAgdGhpcy5fcmVtb3ZlLnVuc2hpZnQoe1xuICAgICAgZmlsdGVyOiBmaWx0ZXIsXG4gICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJydcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICBmb3JOb2RlOiBmdW5jdGlvbiAobm9kZSkge1xuICAgIGlmIChub2RlLmlzQmxhbmspIHJldHVybiB0aGlzLmJsYW5rUnVsZVxuICAgIHZhciBydWxlO1xuXG4gICAgaWYgKChydWxlID0gZmluZFJ1bGUodGhpcy5hcnJheSwgbm9kZSwgdGhpcy5vcHRpb25zKSkpIHJldHVybiBydWxlXG4gICAgaWYgKChydWxlID0gZmluZFJ1bGUodGhpcy5fa2VlcCwgbm9kZSwgdGhpcy5vcHRpb25zKSkpIHJldHVybiBydWxlXG4gICAgaWYgKChydWxlID0gZmluZFJ1bGUodGhpcy5fcmVtb3ZlLCBub2RlLCB0aGlzLm9wdGlvbnMpKSkgcmV0dXJuIHJ1bGVcblxuICAgIHJldHVybiB0aGlzLmRlZmF1bHRSdWxlXG4gIH0sXG5cbiAgZm9yRWFjaDogZnVuY3Rpb24gKGZuKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFycmF5Lmxlbmd0aDsgaSsrKSBmbih0aGlzLmFycmF5W2ldLCBpKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZmluZFJ1bGUgKHJ1bGVzLCBub2RlLCBvcHRpb25zKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcnVsZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcnVsZSA9IHJ1bGVzW2ldO1xuICAgIGlmIChmaWx0ZXJWYWx1ZShydWxlLCBub2RlLCBvcHRpb25zKSkgcmV0dXJuIHJ1bGVcbiAgfVxuICByZXR1cm4gdm9pZCAwXG59XG5cbmZ1bmN0aW9uIGZpbHRlclZhbHVlIChydWxlLCBub2RlLCBvcHRpb25zKSB7XG4gIHZhciBmaWx0ZXIgPSBydWxlLmZpbHRlcjtcbiAgaWYgKHR5cGVvZiBmaWx0ZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKGZpbHRlciA9PT0gbm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKSByZXR1cm4gdHJ1ZVxuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZmlsdGVyKSkge1xuICAgIGlmIChmaWx0ZXIuaW5kZXhPZihub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpID4gLTEpIHJldHVybiB0cnVlXG4gIH0gZWxzZSBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGlmIChmaWx0ZXIuY2FsbChydWxlLCBub2RlLCBvcHRpb25zKSkgcmV0dXJuIHRydWVcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdgZmlsdGVyYCBuZWVkcyB0byBiZSBhIHN0cmluZywgYXJyYXksIG9yIGZ1bmN0aW9uJylcbiAgfVxufVxuXG4vKipcbiAqIFRoZSBjb2xsYXBzZVdoaXRlc3BhY2UgZnVuY3Rpb24gaXMgYWRhcHRlZCBmcm9tIGNvbGxhcHNlLXdoaXRlc3BhY2VcbiAqIGJ5IEx1YyBUaGV2ZW5hcmQuXG4gKlxuICogVGhlIE1JVCBMaWNlbnNlIChNSVQpXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE0IEx1YyBUaGV2ZW5hcmQgPGx1Y3RoZXZlbmFyZEBnbWFpbC5jb20+XG4gKlxuICogUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuICogb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuICogaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xuICogdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuICogY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG4gKiBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuICpcbiAqIFRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlIGFuZCB0aGlzIHBlcm1pc3Npb24gbm90aWNlIHNoYWxsIGJlIGluY2x1ZGVkIGluXG4gKiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cbiAqXG4gKiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gKiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiAqIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuICogQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuICogTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiAqIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiAqIFRIRSBTT0ZUV0FSRS5cbiAqL1xuXG4vKipcbiAqIGNvbGxhcHNlV2hpdGVzcGFjZShvcHRpb25zKSByZW1vdmVzIGV4dHJhbmVvdXMgd2hpdGVzcGFjZSBmcm9tIGFuIHRoZSBnaXZlbiBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cbmZ1bmN0aW9uIGNvbGxhcHNlV2hpdGVzcGFjZSAob3B0aW9ucykge1xuICB2YXIgZWxlbWVudCA9IG9wdGlvbnMuZWxlbWVudDtcbiAgdmFyIGlzQmxvY2sgPSBvcHRpb25zLmlzQmxvY2s7XG4gIHZhciBpc1ZvaWQgPSBvcHRpb25zLmlzVm9pZDtcbiAgdmFyIGlzUHJlID0gb3B0aW9ucy5pc1ByZSB8fCBmdW5jdGlvbiAobm9kZSkge1xuICAgIHJldHVybiBub2RlLm5vZGVOYW1lID09PSAnUFJFJ1xuICB9O1xuXG4gIGlmICghZWxlbWVudC5maXJzdENoaWxkIHx8IGlzUHJlKGVsZW1lbnQpKSByZXR1cm5cblxuICB2YXIgcHJldlRleHQgPSBudWxsO1xuICB2YXIga2VlcExlYWRpbmdXcyA9IGZhbHNlO1xuXG4gIHZhciBwcmV2ID0gbnVsbDtcbiAgdmFyIG5vZGUgPSBuZXh0KHByZXYsIGVsZW1lbnQsIGlzUHJlKTtcblxuICB3aGlsZSAobm9kZSAhPT0gZWxlbWVudCkge1xuICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAzIHx8IG5vZGUubm9kZVR5cGUgPT09IDQpIHsgLy8gTm9kZS5URVhUX05PREUgb3IgTm9kZS5DREFUQV9TRUNUSU9OX05PREVcbiAgICAgIHZhciB0ZXh0ID0gbm9kZS5kYXRhLnJlcGxhY2UoL1sgXFxyXFxuXFx0XSsvZywgJyAnKTtcblxuICAgICAgaWYgKCghcHJldlRleHQgfHwgLyAkLy50ZXN0KHByZXZUZXh0LmRhdGEpKSAmJlxuICAgICAgICAgICFrZWVwTGVhZGluZ1dzICYmIHRleHRbMF0gPT09ICcgJykge1xuICAgICAgICB0ZXh0ID0gdGV4dC5zdWJzdHIoMSk7XG4gICAgICB9XG5cbiAgICAgIC8vIGB0ZXh0YCBtaWdodCBiZSBlbXB0eSBhdCB0aGlzIHBvaW50LlxuICAgICAgaWYgKCF0ZXh0KSB7XG4gICAgICAgIG5vZGUgPSByZW1vdmUobm9kZSk7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIG5vZGUuZGF0YSA9IHRleHQ7XG5cbiAgICAgIHByZXZUZXh0ID0gbm9kZTtcbiAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpIHsgLy8gTm9kZS5FTEVNRU5UX05PREVcbiAgICAgIGlmIChpc0Jsb2NrKG5vZGUpIHx8IG5vZGUubm9kZU5hbWUgPT09ICdCUicpIHtcbiAgICAgICAgaWYgKHByZXZUZXh0KSB7XG4gICAgICAgICAgcHJldlRleHQuZGF0YSA9IHByZXZUZXh0LmRhdGEucmVwbGFjZSgvICQvLCAnJyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcmV2VGV4dCA9IG51bGw7XG4gICAgICAgIGtlZXBMZWFkaW5nV3MgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAoaXNWb2lkKG5vZGUpIHx8IGlzUHJlKG5vZGUpKSB7XG4gICAgICAgIC8vIEF2b2lkIHRyaW1taW5nIHNwYWNlIGFyb3VuZCBub24tYmxvY2ssIG5vbi1CUiB2b2lkIGVsZW1lbnRzIGFuZCBpbmxpbmUgUFJFLlxuICAgICAgICBwcmV2VGV4dCA9IG51bGw7XG4gICAgICAgIGtlZXBMZWFkaW5nV3MgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChwcmV2VGV4dCkge1xuICAgICAgICAvLyBEcm9wIHByb3RlY3Rpb24gaWYgc2V0IHByZXZpb3VzbHkuXG4gICAgICAgIGtlZXBMZWFkaW5nV3MgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZSA9IHJlbW92ZShub2RlKTtcbiAgICAgIGNvbnRpbnVlXG4gICAgfVxuXG4gICAgdmFyIG5leHROb2RlID0gbmV4dChwcmV2LCBub2RlLCBpc1ByZSk7XG4gICAgcHJldiA9IG5vZGU7XG4gICAgbm9kZSA9IG5leHROb2RlO1xuICB9XG5cbiAgaWYgKHByZXZUZXh0KSB7XG4gICAgcHJldlRleHQuZGF0YSA9IHByZXZUZXh0LmRhdGEucmVwbGFjZSgvICQvLCAnJyk7XG4gICAgaWYgKCFwcmV2VGV4dC5kYXRhKSB7XG4gICAgICByZW1vdmUocHJldlRleHQpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIHJlbW92ZShub2RlKSByZW1vdmVzIHRoZSBnaXZlbiBub2RlIGZyb20gdGhlIERPTSBhbmQgcmV0dXJucyB0aGVcbiAqIG5leHQgbm9kZSBpbiB0aGUgc2VxdWVuY2UuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtOb2RlfSBub2RlXG4gKi9cbmZ1bmN0aW9uIHJlbW92ZSAobm9kZSkge1xuICB2YXIgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmcgfHwgbm9kZS5wYXJlbnROb2RlO1xuXG4gIG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTtcblxuICByZXR1cm4gbmV4dFxufVxuXG4vKipcbiAqIG5leHQocHJldiwgY3VycmVudCwgaXNQcmUpIHJldHVybnMgdGhlIG5leHQgbm9kZSBpbiB0aGUgc2VxdWVuY2UsIGdpdmVuIHRoZVxuICogY3VycmVudCBhbmQgcHJldmlvdXMgbm9kZXMuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBwcmV2XG4gKiBAcGFyYW0ge05vZGV9IGN1cnJlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGlzUHJlXG4gKiBAcmV0dXJuIHtOb2RlfVxuICovXG5mdW5jdGlvbiBuZXh0IChwcmV2LCBjdXJyZW50LCBpc1ByZSkge1xuICBpZiAoKHByZXYgJiYgcHJldi5wYXJlbnROb2RlID09PSBjdXJyZW50KSB8fCBpc1ByZShjdXJyZW50KSkge1xuICAgIHJldHVybiBjdXJyZW50Lm5leHRTaWJsaW5nIHx8IGN1cnJlbnQucGFyZW50Tm9kZVxuICB9XG5cbiAgcmV0dXJuIGN1cnJlbnQuZmlyc3RDaGlsZCB8fCBjdXJyZW50Lm5leHRTaWJsaW5nIHx8IGN1cnJlbnQucGFyZW50Tm9kZVxufVxuXG4vKlxuICogU2V0IHVwIHdpbmRvdyBmb3IgTm9kZS5qc1xuICovXG5cbnZhciByb290ID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDoge30pO1xuXG4vKlxuICogUGFyc2luZyBIVE1MIHN0cmluZ3NcbiAqL1xuXG5mdW5jdGlvbiBjYW5QYXJzZUhUTUxOYXRpdmVseSAoKSB7XG4gIHZhciBQYXJzZXIgPSByb290LkRPTVBhcnNlcjtcbiAgdmFyIGNhblBhcnNlID0gZmFsc2U7XG5cbiAgLy8gQWRhcHRlZCBmcm9tIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tLzExMjkwMzFcbiAgLy8gRmlyZWZveC9PcGVyYS9JRSB0aHJvdyBlcnJvcnMgb24gdW5zdXBwb3J0ZWQgdHlwZXNcbiAgdHJ5IHtcbiAgICAvLyBXZWJLaXQgcmV0dXJucyBudWxsIG9uIHVuc3VwcG9ydGVkIHR5cGVzXG4gICAgaWYgKG5ldyBQYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoJycsICd0ZXh0L2h0bWwnKSkge1xuICAgICAgY2FuUGFyc2UgPSB0cnVlO1xuICAgIH1cbiAgfSBjYXRjaCAoZSkge31cblxuICByZXR1cm4gY2FuUGFyc2Vcbn1cblxuZnVuY3Rpb24gY3JlYXRlSFRNTFBhcnNlciAoKSB7XG4gIHZhciBQYXJzZXIgPSBmdW5jdGlvbiAoKSB7fTtcblxuICB7XG4gICAgaWYgKHNob3VsZFVzZUFjdGl2ZVgoKSkge1xuICAgICAgUGFyc2VyLnByb3RvdHlwZS5wYXJzZUZyb21TdHJpbmcgPSBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICAgIHZhciBkb2MgPSBuZXcgd2luZG93LkFjdGl2ZVhPYmplY3QoJ2h0bWxmaWxlJyk7XG4gICAgICAgIGRvYy5kZXNpZ25Nb2RlID0gJ29uJzsgLy8gZGlzYWJsZSBvbi1wYWdlIHNjcmlwdHNcbiAgICAgICAgZG9jLm9wZW4oKTtcbiAgICAgICAgZG9jLndyaXRlKHN0cmluZyk7XG4gICAgICAgIGRvYy5jbG9zZSgpO1xuICAgICAgICByZXR1cm4gZG9jXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBQYXJzZXIucHJvdG90eXBlLnBhcnNlRnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzdHJpbmcpIHtcbiAgICAgICAgdmFyIGRvYyA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgnJyk7XG4gICAgICAgIGRvYy5vcGVuKCk7XG4gICAgICAgIGRvYy53cml0ZShzdHJpbmcpO1xuICAgICAgICBkb2MuY2xvc2UoKTtcbiAgICAgICAgcmV0dXJuIGRvY1xuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFBhcnNlclxufVxuXG5mdW5jdGlvbiBzaG91bGRVc2VBY3RpdmVYICgpIHtcbiAgdmFyIHVzZUFjdGl2ZVggPSBmYWxzZTtcbiAgdHJ5IHtcbiAgICBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoJycpLm9wZW4oKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmICh3aW5kb3cuQWN0aXZlWE9iamVjdCkgdXNlQWN0aXZlWCA9IHRydWU7XG4gIH1cbiAgcmV0dXJuIHVzZUFjdGl2ZVhcbn1cblxudmFyIEhUTUxQYXJzZXIgPSBjYW5QYXJzZUhUTUxOYXRpdmVseSgpID8gcm9vdC5ET01QYXJzZXIgOiBjcmVhdGVIVE1MUGFyc2VyKCk7XG5cbmZ1bmN0aW9uIFJvb3ROb2RlIChpbnB1dCwgb3B0aW9ucykge1xuICB2YXIgcm9vdDtcbiAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgZG9jID0gaHRtbFBhcnNlcigpLnBhcnNlRnJvbVN0cmluZyhcbiAgICAgIC8vIERPTSBwYXJzZXJzIGFycmFuZ2UgZWxlbWVudHMgaW4gdGhlIDxoZWFkPiBhbmQgPGJvZHk+LlxuICAgICAgLy8gV3JhcHBpbmcgaW4gYSBjdXN0b20gZWxlbWVudCBlbnN1cmVzIGVsZW1lbnRzIGFyZSByZWxpYWJseSBhcnJhbmdlZCBpblxuICAgICAgLy8gYSBzaW5nbGUgZWxlbWVudC5cbiAgICAgICc8eC10dXJuZG93biBpZD1cInR1cm5kb3duLXJvb3RcIj4nICsgaW5wdXQgKyAnPC94LXR1cm5kb3duPicsXG4gICAgICAndGV4dC9odG1sJ1xuICAgICk7XG4gICAgcm9vdCA9IGRvYy5nZXRFbGVtZW50QnlJZCgndHVybmRvd24tcm9vdCcpO1xuICB9IGVsc2Uge1xuICAgIHJvb3QgPSBpbnB1dC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cbiAgY29sbGFwc2VXaGl0ZXNwYWNlKHtcbiAgICBlbGVtZW50OiByb290LFxuICAgIGlzQmxvY2s6IGlzQmxvY2ssXG4gICAgaXNWb2lkOiBpc1ZvaWQsXG4gICAgaXNQcmU6IG9wdGlvbnMucHJlZm9ybWF0dGVkQ29kZSA/IGlzUHJlT3JDb2RlIDogbnVsbFxuICB9KTtcblxuICByZXR1cm4gcm9vdFxufVxuXG52YXIgX2h0bWxQYXJzZXI7XG5mdW5jdGlvbiBodG1sUGFyc2VyICgpIHtcbiAgX2h0bWxQYXJzZXIgPSBfaHRtbFBhcnNlciB8fCBuZXcgSFRNTFBhcnNlcigpO1xuICByZXR1cm4gX2h0bWxQYXJzZXJcbn1cblxuZnVuY3Rpb24gaXNQcmVPckNvZGUgKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUubm9kZU5hbWUgPT09ICdQUkUnIHx8IG5vZGUubm9kZU5hbWUgPT09ICdDT0RFJ1xufVxuXG5mdW5jdGlvbiBOb2RlIChub2RlLCBvcHRpb25zKSB7XG4gIG5vZGUuaXNCbG9jayA9IGlzQmxvY2sobm9kZSk7XG4gIG5vZGUuaXNDb2RlID0gbm9kZS5ub2RlTmFtZSA9PT0gJ0NPREUnIHx8IG5vZGUucGFyZW50Tm9kZS5pc0NvZGU7XG4gIG5vZGUuaXNCbGFuayA9IGlzQmxhbmsobm9kZSk7XG4gIG5vZGUuZmxhbmtpbmdXaGl0ZXNwYWNlID0gZmxhbmtpbmdXaGl0ZXNwYWNlKG5vZGUsIG9wdGlvbnMpO1xuICByZXR1cm4gbm9kZVxufVxuXG5mdW5jdGlvbiBpc0JsYW5rIChub2RlKSB7XG4gIHJldHVybiAoXG4gICAgIWlzVm9pZChub2RlKSAmJlxuICAgICFpc01lYW5pbmdmdWxXaGVuQmxhbmsobm9kZSkgJiZcbiAgICAvXlxccyokL2kudGVzdChub2RlLnRleHRDb250ZW50KSAmJlxuICAgICFoYXNWb2lkKG5vZGUpICYmXG4gICAgIWhhc01lYW5pbmdmdWxXaGVuQmxhbmsobm9kZSlcbiAgKVxufVxuXG5mdW5jdGlvbiBmbGFua2luZ1doaXRlc3BhY2UgKG5vZGUsIG9wdGlvbnMpIHtcbiAgaWYgKG5vZGUuaXNCbG9jayB8fCAob3B0aW9ucy5wcmVmb3JtYXR0ZWRDb2RlICYmIG5vZGUuaXNDb2RlKSkge1xuICAgIHJldHVybiB7IGxlYWRpbmc6ICcnLCB0cmFpbGluZzogJycgfVxuICB9XG5cbiAgdmFyIGVkZ2VzID0gZWRnZVdoaXRlc3BhY2Uobm9kZS50ZXh0Q29udGVudCk7XG5cbiAgLy8gYWJhbmRvbiBsZWFkaW5nIEFTQ0lJIFdTIGlmIGxlZnQtZmxhbmtlZCBieSBBU0NJSSBXU1xuICBpZiAoZWRnZXMubGVhZGluZ0FzY2lpICYmIGlzRmxhbmtlZEJ5V2hpdGVzcGFjZSgnbGVmdCcsIG5vZGUsIG9wdGlvbnMpKSB7XG4gICAgZWRnZXMubGVhZGluZyA9IGVkZ2VzLmxlYWRpbmdOb25Bc2NpaTtcbiAgfVxuXG4gIC8vIGFiYW5kb24gdHJhaWxpbmcgQVNDSUkgV1MgaWYgcmlnaHQtZmxhbmtlZCBieSBBU0NJSSBXU1xuICBpZiAoZWRnZXMudHJhaWxpbmdBc2NpaSAmJiBpc0ZsYW5rZWRCeVdoaXRlc3BhY2UoJ3JpZ2h0Jywgbm9kZSwgb3B0aW9ucykpIHtcbiAgICBlZGdlcy50cmFpbGluZyA9IGVkZ2VzLnRyYWlsaW5nTm9uQXNjaWk7XG4gIH1cblxuICByZXR1cm4geyBsZWFkaW5nOiBlZGdlcy5sZWFkaW5nLCB0cmFpbGluZzogZWRnZXMudHJhaWxpbmcgfVxufVxuXG5mdW5jdGlvbiBlZGdlV2hpdGVzcGFjZSAoc3RyaW5nKSB7XG4gIHZhciBtID0gc3RyaW5nLm1hdGNoKC9eKChbIFxcdFxcclxcbl0qKShcXHMqKSkoPzooPz1cXFMpW1xcc1xcU10qXFxTKT8oKFxccyo/KShbIFxcdFxcclxcbl0qKSkkLyk7XG4gIHJldHVybiB7XG4gICAgbGVhZGluZzogbVsxXSwgLy8gd2hvbGUgc3RyaW5nIGZvciB3aGl0ZXNwYWNlLW9ubHkgc3RyaW5nc1xuICAgIGxlYWRpbmdBc2NpaTogbVsyXSxcbiAgICBsZWFkaW5nTm9uQXNjaWk6IG1bM10sXG4gICAgdHJhaWxpbmc6IG1bNF0sIC8vIGVtcHR5IGZvciB3aGl0ZXNwYWNlLW9ubHkgc3RyaW5nc1xuICAgIHRyYWlsaW5nTm9uQXNjaWk6IG1bNV0sXG4gICAgdHJhaWxpbmdBc2NpaTogbVs2XVxuICB9XG59XG5cbmZ1bmN0aW9uIGlzRmxhbmtlZEJ5V2hpdGVzcGFjZSAoc2lkZSwgbm9kZSwgb3B0aW9ucykge1xuICB2YXIgc2libGluZztcbiAgdmFyIHJlZ0V4cDtcbiAgdmFyIGlzRmxhbmtlZDtcblxuICBpZiAoc2lkZSA9PT0gJ2xlZnQnKSB7XG4gICAgc2libGluZyA9IG5vZGUucHJldmlvdXNTaWJsaW5nO1xuICAgIHJlZ0V4cCA9IC8gJC87XG4gIH0gZWxzZSB7XG4gICAgc2libGluZyA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgcmVnRXhwID0gL14gLztcbiAgfVxuXG4gIGlmIChzaWJsaW5nKSB7XG4gICAgaWYgKHNpYmxpbmcubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgIGlzRmxhbmtlZCA9IHJlZ0V4cC50ZXN0KHNpYmxpbmcubm9kZVZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKG9wdGlvbnMucHJlZm9ybWF0dGVkQ29kZSAmJiBzaWJsaW5nLm5vZGVOYW1lID09PSAnQ09ERScpIHtcbiAgICAgIGlzRmxhbmtlZCA9IGZhbHNlO1xuICAgIH0gZWxzZSBpZiAoc2libGluZy5ub2RlVHlwZSA9PT0gMSAmJiAhaXNCbG9jayhzaWJsaW5nKSkge1xuICAgICAgaXNGbGFua2VkID0gcmVnRXhwLnRlc3Qoc2libGluZy50ZXh0Q29udGVudCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBpc0ZsYW5rZWRcbn1cblxudmFyIHJlZHVjZSA9IEFycmF5LnByb3RvdHlwZS5yZWR1Y2U7XG52YXIgZXNjYXBlcyA9IFtcbiAgWy9cXFxcL2csICdcXFxcXFxcXCddLFxuICBbL1xcKi9nLCAnXFxcXConXSxcbiAgWy9eLS9nLCAnXFxcXC0nXSxcbiAgWy9eXFwrIC9nLCAnXFxcXCsgJ10sXG4gIFsvXig9KykvZywgJ1xcXFwkMSddLFxuICBbL14oI3sxLDZ9KSAvZywgJ1xcXFwkMSAnXSxcbiAgWy9gL2csICdcXFxcYCddLFxuICBbL15+fn4vZywgJ1xcXFx+fn4nXSxcbiAgWy9cXFsvZywgJ1xcXFxbJ10sXG4gIFsvXFxdL2csICdcXFxcXSddLFxuICBbL14+L2csICdcXFxcPiddLFxuICBbL18vZywgJ1xcXFxfJ10sXG4gIFsvXihcXGQrKVxcLiAvZywgJyQxXFxcXC4gJ11cbl07XG5cbmZ1bmN0aW9uIFR1cm5kb3duU2VydmljZSAob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgVHVybmRvd25TZXJ2aWNlKSkgcmV0dXJuIG5ldyBUdXJuZG93blNlcnZpY2Uob3B0aW9ucylcblxuICB2YXIgZGVmYXVsdHMgPSB7XG4gICAgcnVsZXM6IHJ1bGVzLFxuICAgIGhlYWRpbmdTdHlsZTogJ3NldGV4dCcsXG4gICAgaHI6ICcqICogKicsXG4gICAgYnVsbGV0TGlzdE1hcmtlcjogJyonLFxuICAgIGNvZGVCbG9ja1N0eWxlOiAnaW5kZW50ZWQnLFxuICAgIGZlbmNlOiAnYGBgJyxcbiAgICBlbURlbGltaXRlcjogJ18nLFxuICAgIHN0cm9uZ0RlbGltaXRlcjogJyoqJyxcbiAgICBsaW5rU3R5bGU6ICdpbmxpbmVkJyxcbiAgICBsaW5rUmVmZXJlbmNlU3R5bGU6ICdmdWxsJyxcbiAgICBicjogJyAgJyxcbiAgICBwcmVmb3JtYXR0ZWRDb2RlOiBmYWxzZSxcbiAgICBibGFua1JlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSkge1xuICAgICAgcmV0dXJuIG5vZGUuaXNCbG9jayA/ICdcXG5cXG4nIDogJydcbiAgICB9LFxuICAgIGtlZXBSZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQsIG5vZGUpIHtcbiAgICAgIHJldHVybiBub2RlLmlzQmxvY2sgPyAnXFxuXFxuJyArIG5vZGUub3V0ZXJIVE1MICsgJ1xcblxcbicgOiBub2RlLm91dGVySFRNTFxuICAgIH0sXG4gICAgZGVmYXVsdFJlcGxhY2VtZW50OiBmdW5jdGlvbiAoY29udGVudCwgbm9kZSkge1xuICAgICAgcmV0dXJuIG5vZGUuaXNCbG9jayA/ICdcXG5cXG4nICsgY29udGVudCArICdcXG5cXG4nIDogY29udGVudFxuICAgIH1cbiAgfTtcbiAgdGhpcy5vcHRpb25zID0gZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG4gIHRoaXMucnVsZXMgPSBuZXcgUnVsZXModGhpcy5vcHRpb25zKTtcbn1cblxuVHVybmRvd25TZXJ2aWNlLnByb3RvdHlwZSA9IHtcbiAgLyoqXG4gICAqIFRoZSBlbnRyeSBwb2ludCBmb3IgY29udmVydGluZyBhIHN0cmluZyBvciBET00gbm9kZSB0byBNYXJrZG93blxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfEhUTUxFbGVtZW50fSBpbnB1dCBUaGUgc3RyaW5nIG9yIERPTSBub2RlIHRvIGNvbnZlcnRcbiAgICogQHJldHVybnMgQSBNYXJrZG93biByZXByZXNlbnRhdGlvbiBvZiB0aGUgaW5wdXRcbiAgICogQHR5cGUgU3RyaW5nXG4gICAqL1xuXG4gIHR1cm5kb3duOiBmdW5jdGlvbiAoaW5wdXQpIHtcbiAgICBpZiAoIWNhbkNvbnZlcnQoaW5wdXQpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICBpbnB1dCArICcgaXMgbm90IGEgc3RyaW5nLCBvciBhbiBlbGVtZW50L2RvY3VtZW50L2ZyYWdtZW50IG5vZGUuJ1xuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChpbnB1dCA9PT0gJycpIHJldHVybiAnJ1xuXG4gICAgdmFyIG91dHB1dCA9IHByb2Nlc3MuY2FsbCh0aGlzLCBuZXcgUm9vdE5vZGUoaW5wdXQsIHRoaXMub3B0aW9ucykpO1xuICAgIHJldHVybiBwb3N0UHJvY2Vzcy5jYWxsKHRoaXMsIG91dHB1dClcbiAgfSxcblxuICAvKipcbiAgICogQWRkIG9uZSBvciBtb3JlIHBsdWdpbnNcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufEFycmF5fSBwbHVnaW4gVGhlIHBsdWdpbiBvciBhcnJheSBvZiBwbHVnaW5zIHRvIGFkZFxuICAgKiBAcmV0dXJucyBUaGUgVHVybmRvd24gaW5zdGFuY2UgZm9yIGNoYWluaW5nXG4gICAqIEB0eXBlIE9iamVjdFxuICAgKi9cblxuICB1c2U6IGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwbHVnaW4pKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBsdWdpbi5sZW5ndGg7IGkrKykgdGhpcy51c2UocGx1Z2luW2ldKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBwbHVnaW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHBsdWdpbih0aGlzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcigncGx1Z2luIG11c3QgYmUgYSBGdW5jdGlvbiBvciBhbiBBcnJheSBvZiBGdW5jdGlvbnMnKVxuICAgIH1cbiAgICByZXR1cm4gdGhpc1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGRzIGEgcnVsZVxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgVGhlIHVuaXF1ZSBrZXkgb2YgdGhlIHJ1bGVcbiAgICogQHBhcmFtIHtPYmplY3R9IHJ1bGUgVGhlIHJ1bGVcbiAgICogQHJldHVybnMgVGhlIFR1cm5kb3duIGluc3RhbmNlIGZvciBjaGFpbmluZ1xuICAgKiBAdHlwZSBPYmplY3RcbiAgICovXG5cbiAgYWRkUnVsZTogZnVuY3Rpb24gKGtleSwgcnVsZSkge1xuICAgIHRoaXMucnVsZXMuYWRkKGtleSwgcnVsZSk7XG4gICAgcmV0dXJuIHRoaXNcbiAgfSxcblxuICAvKipcbiAgICogS2VlcCBhIG5vZGUgKGFzIEhUTUwpIHRoYXQgbWF0Y2hlcyB0aGUgZmlsdGVyXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtTdHJpbmd8QXJyYXl8RnVuY3Rpb259IGZpbHRlciBUaGUgdW5pcXVlIGtleSBvZiB0aGUgcnVsZVxuICAgKiBAcmV0dXJucyBUaGUgVHVybmRvd24gaW5zdGFuY2UgZm9yIGNoYWluaW5nXG4gICAqIEB0eXBlIE9iamVjdFxuICAgKi9cblxuICBrZWVwOiBmdW5jdGlvbiAoZmlsdGVyKSB7XG4gICAgdGhpcy5ydWxlcy5rZWVwKGZpbHRlcik7XG4gICAgcmV0dXJuIHRoaXNcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGEgbm9kZSB0aGF0IG1hdGNoZXMgdGhlIGZpbHRlclxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fEZ1bmN0aW9ufSBmaWx0ZXIgVGhlIHVuaXF1ZSBrZXkgb2YgdGhlIHJ1bGVcbiAgICogQHJldHVybnMgVGhlIFR1cm5kb3duIGluc3RhbmNlIGZvciBjaGFpbmluZ1xuICAgKiBAdHlwZSBPYmplY3RcbiAgICovXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiAoZmlsdGVyKSB7XG4gICAgdGhpcy5ydWxlcy5yZW1vdmUoZmlsdGVyKTtcbiAgICByZXR1cm4gdGhpc1xuICB9LFxuXG4gIC8qKlxuICAgKiBFc2NhcGVzIE1hcmtkb3duIHN5bnRheFxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBzdHJpbmcgVGhlIHN0cmluZyB0byBlc2NhcGVcbiAgICogQHJldHVybnMgQSBzdHJpbmcgd2l0aCBNYXJrZG93biBzeW50YXggZXNjYXBlZFxuICAgKiBAdHlwZSBTdHJpbmdcbiAgICovXG5cbiAgZXNjYXBlOiBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgcmV0dXJuIGVzY2FwZXMucmVkdWNlKGZ1bmN0aW9uIChhY2N1bXVsYXRvciwgZXNjYXBlKSB7XG4gICAgICByZXR1cm4gYWNjdW11bGF0b3IucmVwbGFjZShlc2NhcGVbMF0sIGVzY2FwZVsxXSlcbiAgICB9LCBzdHJpbmcpXG4gIH1cbn07XG5cbi8qKlxuICogUmVkdWNlcyBhIERPTSBub2RlIGRvd24gdG8gaXRzIE1hcmtkb3duIHN0cmluZyBlcXVpdmFsZW50XG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gcGFyZW50Tm9kZSBUaGUgbm9kZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyBBIE1hcmtkb3duIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBub2RlXG4gKiBAdHlwZSBTdHJpbmdcbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzIChwYXJlbnROb2RlKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgcmV0dXJuIHJlZHVjZS5jYWxsKHBhcmVudE5vZGUuY2hpbGROb2RlcywgZnVuY3Rpb24gKG91dHB1dCwgbm9kZSkge1xuICAgIG5vZGUgPSBuZXcgTm9kZShub2RlLCBzZWxmLm9wdGlvbnMpO1xuXG4gICAgdmFyIHJlcGxhY2VtZW50ID0gJyc7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgIHJlcGxhY2VtZW50ID0gbm9kZS5pc0NvZGUgPyBub2RlLm5vZGVWYWx1ZSA6IHNlbGYuZXNjYXBlKG5vZGUubm9kZVZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDEpIHtcbiAgICAgIHJlcGxhY2VtZW50ID0gcmVwbGFjZW1lbnRGb3JOb2RlLmNhbGwoc2VsZiwgbm9kZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGpvaW4ob3V0cHV0LCByZXBsYWNlbWVudClcbiAgfSwgJycpXG59XG5cbi8qKlxuICogQXBwZW5kcyBzdHJpbmdzIGFzIGVhY2ggcnVsZSByZXF1aXJlcyBhbmQgdHJpbXMgdGhlIG91dHB1dFxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBvdXRwdXQgVGhlIGNvbnZlcnNpb24gb3V0cHV0XG4gKiBAcmV0dXJucyBBIHRyaW1tZWQgdmVyc2lvbiBvZiB0aGUgb3VwdXRcbiAqIEB0eXBlIFN0cmluZ1xuICovXG5cbmZ1bmN0aW9uIHBvc3RQcm9jZXNzIChvdXRwdXQpIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0aGlzLnJ1bGVzLmZvckVhY2goZnVuY3Rpb24gKHJ1bGUpIHtcbiAgICBpZiAodHlwZW9mIHJ1bGUuYXBwZW5kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBvdXRwdXQgPSBqb2luKG91dHB1dCwgcnVsZS5hcHBlbmQoc2VsZi5vcHRpb25zKSk7XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gb3V0cHV0LnJlcGxhY2UoL15bXFx0XFxyXFxuXSsvLCAnJykucmVwbGFjZSgvW1xcdFxcclxcblxcc10rJC8sICcnKVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGVsZW1lbnQgbm9kZSB0byBpdHMgTWFya2Rvd24gZXF1aXZhbGVudFxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IG5vZGUgVGhlIG5vZGUgdG8gY29udmVydFxuICogQHJldHVybnMgQSBNYXJrZG93biByZXByZXNlbnRhdGlvbiBvZiB0aGUgbm9kZVxuICogQHR5cGUgU3RyaW5nXG4gKi9cblxuZnVuY3Rpb24gcmVwbGFjZW1lbnRGb3JOb2RlIChub2RlKSB7XG4gIHZhciBydWxlID0gdGhpcy5ydWxlcy5mb3JOb2RlKG5vZGUpO1xuICB2YXIgY29udGVudCA9IHByb2Nlc3MuY2FsbCh0aGlzLCBub2RlKTtcbiAgdmFyIHdoaXRlc3BhY2UgPSBub2RlLmZsYW5raW5nV2hpdGVzcGFjZTtcbiAgaWYgKHdoaXRlc3BhY2UubGVhZGluZyB8fCB3aGl0ZXNwYWNlLnRyYWlsaW5nKSBjb250ZW50ID0gY29udGVudC50cmltKCk7XG4gIHJldHVybiAoXG4gICAgd2hpdGVzcGFjZS5sZWFkaW5nICtcbiAgICBydWxlLnJlcGxhY2VtZW50KGNvbnRlbnQsIG5vZGUsIHRoaXMub3B0aW9ucykgK1xuICAgIHdoaXRlc3BhY2UudHJhaWxpbmdcbiAgKVxufVxuXG4vKipcbiAqIEpvaW5zIHJlcGxhY2VtZW50IHRvIHRoZSBjdXJyZW50IG91dHB1dCB3aXRoIGFwcHJvcHJpYXRlIG51bWJlciBvZiBuZXcgbGluZXNcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1N0cmluZ30gb3V0cHV0IFRoZSBjdXJyZW50IGNvbnZlcnNpb24gb3V0cHV0XG4gKiBAcGFyYW0ge1N0cmluZ30gcmVwbGFjZW1lbnQgVGhlIHN0cmluZyB0byBhcHBlbmQgdG8gdGhlIG91dHB1dFxuICogQHJldHVybnMgSm9pbmVkIG91dHB1dFxuICogQHR5cGUgU3RyaW5nXG4gKi9cblxuZnVuY3Rpb24gam9pbiAob3V0cHV0LCByZXBsYWNlbWVudCkge1xuICB2YXIgczEgPSB0cmltVHJhaWxpbmdOZXdsaW5lcyhvdXRwdXQpO1xuICB2YXIgczIgPSB0cmltTGVhZGluZ05ld2xpbmVzKHJlcGxhY2VtZW50KTtcbiAgdmFyIG5scyA9IE1hdGgubWF4KG91dHB1dC5sZW5ndGggLSBzMS5sZW5ndGgsIHJlcGxhY2VtZW50Lmxlbmd0aCAtIHMyLmxlbmd0aCk7XG4gIHZhciBzZXBhcmF0b3IgPSAnXFxuXFxuJy5zdWJzdHJpbmcoMCwgbmxzKTtcblxuICByZXR1cm4gczEgKyBzZXBhcmF0b3IgKyBzMlxufVxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBpbnB1dCBjYW4gYmUgY29udmVydGVkXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtTdHJpbmd8SFRNTEVsZW1lbnR9IGlucHV0IERlc2NyaWJlIHRoaXMgcGFyYW1ldGVyXG4gKiBAcmV0dXJucyBEZXNjcmliZSB3aGF0IGl0IHJldHVybnNcbiAqIEB0eXBlIFN0cmluZ3xPYmplY3R8QXJyYXl8Qm9vbGVhbnxOdW1iZXJcbiAqL1xuXG5mdW5jdGlvbiBjYW5Db252ZXJ0IChpbnB1dCkge1xuICByZXR1cm4gKFxuICAgIGlucHV0ICE9IG51bGwgJiYgKFxuICAgICAgdHlwZW9mIGlucHV0ID09PSAnc3RyaW5nJyB8fFxuICAgICAgKGlucHV0Lm5vZGVUeXBlICYmIChcbiAgICAgICAgaW5wdXQubm9kZVR5cGUgPT09IDEgfHwgaW5wdXQubm9kZVR5cGUgPT09IDkgfHwgaW5wdXQubm9kZVR5cGUgPT09IDExXG4gICAgICApKVxuICAgIClcbiAgKVxufVxuXG5leHBvcnQgZGVmYXVsdCBUdXJuZG93blNlcnZpY2U7XG4iLCAidmFyIGhpZ2hsaWdodFJlZ0V4cCA9IC9oaWdobGlnaHQtKD86dGV4dHxzb3VyY2UpLShbYS16MC05XSspLztcblxuZnVuY3Rpb24gaGlnaGxpZ2h0ZWRDb2RlQmxvY2sgKHR1cm5kb3duU2VydmljZSkge1xuICB0dXJuZG93blNlcnZpY2UuYWRkUnVsZSgnaGlnaGxpZ2h0ZWRDb2RlQmxvY2snLCB7XG4gICAgZmlsdGVyOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgdmFyIGZpcnN0Q2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBub2RlLm5vZGVOYW1lID09PSAnRElWJyAmJlxuICAgICAgICBoaWdobGlnaHRSZWdFeHAudGVzdChub2RlLmNsYXNzTmFtZSkgJiZcbiAgICAgICAgZmlyc3RDaGlsZCAmJlxuICAgICAgICBmaXJzdENoaWxkLm5vZGVOYW1lID09PSAnUFJFJ1xuICAgICAgKVxuICAgIH0sXG4gICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgY2xhc3NOYW1lID0gbm9kZS5jbGFzc05hbWUgfHwgJyc7XG4gICAgICB2YXIgbGFuZ3VhZ2UgPSAoY2xhc3NOYW1lLm1hdGNoKGhpZ2hsaWdodFJlZ0V4cCkgfHwgW251bGwsICcnXSlbMV07XG5cbiAgICAgIHJldHVybiAoXG4gICAgICAgICdcXG5cXG4nICsgb3B0aW9ucy5mZW5jZSArIGxhbmd1YWdlICsgJ1xcbicgK1xuICAgICAgICBub2RlLmZpcnN0Q2hpbGQudGV4dENvbnRlbnQgK1xuICAgICAgICAnXFxuJyArIG9wdGlvbnMuZmVuY2UgKyAnXFxuXFxuJ1xuICAgICAgKVxuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHN0cmlrZXRocm91Z2ggKHR1cm5kb3duU2VydmljZSkge1xuICB0dXJuZG93blNlcnZpY2UuYWRkUnVsZSgnc3RyaWtldGhyb3VnaCcsIHtcbiAgICBmaWx0ZXI6IFsnZGVsJywgJ3MnLCAnc3RyaWtlJ10sXG4gICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICByZXR1cm4gJ34nICsgY29udGVudCArICd+J1xuICAgIH1cbiAgfSk7XG59XG5cbnZhciBpbmRleE9mID0gQXJyYXkucHJvdG90eXBlLmluZGV4T2Y7XG52YXIgZXZlcnkgPSBBcnJheS5wcm90b3R5cGUuZXZlcnk7XG52YXIgcnVsZXMgPSB7fTtcblxucnVsZXMudGFibGVDZWxsID0ge1xuICBmaWx0ZXI6IFsndGgnLCAndGQnXSxcbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlKSB7XG4gICAgcmV0dXJuIGNlbGwoY29udGVudCwgbm9kZSlcbiAgfVxufTtcblxucnVsZXMudGFibGVSb3cgPSB7XG4gIGZpbHRlcjogJ3RyJyxcbiAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlKSB7XG4gICAgdmFyIGJvcmRlckNlbGxzID0gJyc7XG4gICAgdmFyIGFsaWduTWFwID0geyBsZWZ0OiAnOi0tJywgcmlnaHQ6ICctLTonLCBjZW50ZXI6ICc6LTonIH07XG5cbiAgICBpZiAoaXNIZWFkaW5nUm93KG5vZGUpKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUuY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYm9yZGVyID0gJy0tLSc7XG4gICAgICAgIHZhciBhbGlnbiA9IChcbiAgICAgICAgICBub2RlLmNoaWxkTm9kZXNbaV0uZ2V0QXR0cmlidXRlKCdhbGlnbicpIHx8ICcnXG4gICAgICAgICkudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICBpZiAoYWxpZ24pIGJvcmRlciA9IGFsaWduTWFwW2FsaWduXSB8fCBib3JkZXI7XG5cbiAgICAgICAgYm9yZGVyQ2VsbHMgKz0gY2VsbChib3JkZXIsIG5vZGUuY2hpbGROb2Rlc1tpXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnXFxuJyArIGNvbnRlbnQgKyAoYm9yZGVyQ2VsbHMgPyAnXFxuJyArIGJvcmRlckNlbGxzIDogJycpXG4gIH1cbn07XG5cbnJ1bGVzLnRhYmxlID0ge1xuICAvLyBPbmx5IGNvbnZlcnQgdGFibGVzIHdpdGggYSBoZWFkaW5nIHJvdy5cbiAgLy8gVGFibGVzIHdpdGggbm8gaGVhZGluZyByb3cgYXJlIGtlcHQgdXNpbmcgYGtlZXBgIChzZWUgYmVsb3cpLlxuICBmaWx0ZXI6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUubm9kZU5hbWUgPT09ICdUQUJMRScgJiYgaXNIZWFkaW5nUm93KG5vZGUucm93c1swXSlcbiAgfSxcblxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAvLyBFbnN1cmUgdGhlcmUgYXJlIG5vIGJsYW5rIGxpbmVzXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgnXFxuXFxuJywgJ1xcbicpO1xuICAgIHJldHVybiAnXFxuXFxuJyArIGNvbnRlbnQgKyAnXFxuXFxuJ1xuICB9XG59O1xuXG5ydWxlcy50YWJsZVNlY3Rpb24gPSB7XG4gIGZpbHRlcjogWyd0aGVhZCcsICd0Ym9keScsICd0Zm9vdCddLFxuICByZXBsYWNlbWVudDogZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICByZXR1cm4gY29udGVudFxuICB9XG59O1xuXG4vLyBBIHRyIGlzIGEgaGVhZGluZyByb3cgaWY6XG4vLyAtIHRoZSBwYXJlbnQgaXMgYSBUSEVBRFxuLy8gLSBvciBpZiBpdHMgdGhlIGZpcnN0IGNoaWxkIG9mIHRoZSBUQUJMRSBvciB0aGUgZmlyc3QgVEJPRFkgKHBvc3NpYmx5XG4vLyAgIGZvbGxvd2luZyBhIGJsYW5rIFRIRUFEKVxuLy8gLSBhbmQgZXZlcnkgY2VsbCBpcyBhIFRIXG5mdW5jdGlvbiBpc0hlYWRpbmdSb3cgKHRyKSB7XG4gIHZhciBwYXJlbnROb2RlID0gdHIucGFyZW50Tm9kZTtcbiAgcmV0dXJuIChcbiAgICBwYXJlbnROb2RlLm5vZGVOYW1lID09PSAnVEhFQUQnIHx8XG4gICAgKFxuICAgICAgcGFyZW50Tm9kZS5maXJzdENoaWxkID09PSB0ciAmJlxuICAgICAgKHBhcmVudE5vZGUubm9kZU5hbWUgPT09ICdUQUJMRScgfHwgaXNGaXJzdFRib2R5KHBhcmVudE5vZGUpKSAmJlxuICAgICAgZXZlcnkuY2FsbCh0ci5jaGlsZE5vZGVzLCBmdW5jdGlvbiAobikgeyByZXR1cm4gbi5ub2RlTmFtZSA9PT0gJ1RIJyB9KVxuICAgIClcbiAgKVxufVxuXG5mdW5jdGlvbiBpc0ZpcnN0VGJvZHkgKGVsZW1lbnQpIHtcbiAgdmFyIHByZXZpb3VzU2libGluZyA9IGVsZW1lbnQucHJldmlvdXNTaWJsaW5nO1xuICByZXR1cm4gKFxuICAgIGVsZW1lbnQubm9kZU5hbWUgPT09ICdUQk9EWScgJiYgKFxuICAgICAgIXByZXZpb3VzU2libGluZyB8fFxuICAgICAgKFxuICAgICAgICBwcmV2aW91c1NpYmxpbmcubm9kZU5hbWUgPT09ICdUSEVBRCcgJiZcbiAgICAgICAgL15cXHMqJC9pLnRlc3QocHJldmlvdXNTaWJsaW5nLnRleHRDb250ZW50KVxuICAgICAgKVxuICAgIClcbiAgKVxufVxuXG5mdW5jdGlvbiBjZWxsIChjb250ZW50LCBub2RlKSB7XG4gIHZhciBpbmRleCA9IGluZGV4T2YuY2FsbChub2RlLnBhcmVudE5vZGUuY2hpbGROb2Rlcywgbm9kZSk7XG4gIHZhciBwcmVmaXggPSAnICc7XG4gIGlmIChpbmRleCA9PT0gMCkgcHJlZml4ID0gJ3wgJztcbiAgcmV0dXJuIHByZWZpeCArIGNvbnRlbnQgKyAnIHwnXG59XG5cbmZ1bmN0aW9uIHRhYmxlcyAodHVybmRvd25TZXJ2aWNlKSB7XG4gIHR1cm5kb3duU2VydmljZS5rZWVwKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmV0dXJuIG5vZGUubm9kZU5hbWUgPT09ICdUQUJMRScgJiYgIWlzSGVhZGluZ1Jvdyhub2RlLnJvd3NbMF0pXG4gIH0pO1xuICBmb3IgKHZhciBrZXkgaW4gcnVsZXMpIHR1cm5kb3duU2VydmljZS5hZGRSdWxlKGtleSwgcnVsZXNba2V5XSk7XG59XG5cbmZ1bmN0aW9uIHRhc2tMaXN0SXRlbXMgKHR1cm5kb3duU2VydmljZSkge1xuICB0dXJuZG93blNlcnZpY2UuYWRkUnVsZSgndGFza0xpc3RJdGVtcycsIHtcbiAgICBmaWx0ZXI6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICByZXR1cm4gbm9kZS50eXBlID09PSAnY2hlY2tib3gnICYmIG5vZGUucGFyZW50Tm9kZS5ub2RlTmFtZSA9PT0gJ0xJJ1xuICAgIH0sXG4gICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChjb250ZW50LCBub2RlKSB7XG4gICAgICByZXR1cm4gKG5vZGUuY2hlY2tlZCA/ICdbeF0nIDogJ1sgXScpICsgJyAnXG4gICAgfVxuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2ZtICh0dXJuZG93blNlcnZpY2UpIHtcbiAgdHVybmRvd25TZXJ2aWNlLnVzZShbXG4gICAgaGlnaGxpZ2h0ZWRDb2RlQmxvY2ssXG4gICAgc3RyaWtldGhyb3VnaCxcbiAgICB0YWJsZXMsXG4gICAgdGFza0xpc3RJdGVtc1xuICBdKTtcbn1cblxuZXhwb3J0IHsgZ2ZtLCBoaWdobGlnaHRlZENvZGVCbG9jaywgc3RyaWtldGhyb3VnaCwgdGFibGVzLCB0YXNrTGlzdEl0ZW1zIH07XG4iLCAiaW1wb3J0IHsgQXBwLCBnZXRMaW5rcGF0aCwgbm9ybWFsaXplUGF0aCwgc3RyaW5naWZ5WWFtbCwgVEZpbGUsIFRGb2xkZXIsIFZhdWx0IH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5leHBvcnQgY2xhc3MgQXBwSGVscGVyIHtcblx0YXBwOiBBcHA7XG5cdHZhdWx0OiBWYXVsdDtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCkge1xuXHRcdHRoaXMuYXBwID0gYXBwO1xuXHRcdHRoaXMudmF1bHQgPSBhcHAudmF1bHQ7XG5cdH1cblxuXHRhc3luYyBjcmVhdGVPck1vZGlmeUJpbmFyeShmaWxlbmFtZV9iYXNlOiBzdHJpbmcsIGJsb2I6IEJsb2IpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50Rm9sZGVyKCk7XG5cdFx0Y29uc3QgdHlwZSA9IGJsb2IudHlwZTtcblx0XHRsZXQgZXh0ZW5zaW9uID0gdHlwZS5zcGxpdCgnaW1hZ2UvJywgMikuYXQoMSk7XG5cdFx0aWYgKGV4dGVuc2lvbiA9PSAnc3ZnK3htbCcpIHtcblx0XHRcdGV4dGVuc2lvbiA9ICdzdmcnO1xuXHRcdH1cblx0XHRjb25zdCBmaWxlbmFtZSA9IGAke2ZpbGVuYW1lX2Jhc2V9LiR7ZXh0ZW5zaW9ufWA7XG5cdFx0Y29uc3QgZmlsZXBhdGggPSBub3JtYWxpemVQYXRoKGAke3BhcmVudC5wYXRofS8ke2ZpbGVuYW1lfWApO1xuXHRcdGNvbnN0IGZpbGUgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlcGF0aCk7XG5cdFx0aWYgKGZpbGUgJiYgZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG5cdFx0XHR0aGlzLnZhdWx0Lm1vZGlmeUJpbmFyeShmaWxlLCBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCkpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnZhdWx0LmNyZWF0ZUJpbmFyeShmaWxlcGF0aCwgYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKTtcblx0XHR9XG5cdFx0cmV0dXJuIGZpbGVuYW1lO1xuXHR9XG5cblx0YXN5bmMgY3JlYXRlT3JNb2RpZnlOb3RlKHRpdGxlOiBzdHJpbmcsIG1hcmtkb3duOiBzdHJpbmcsIGZyb250X21hdHRlcjogYW55KTogUHJvbWlzZTxURmlsZT4ge1xuXHRcdGNvbnN0IHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50Rm9sZGVyKCk7XG5cdFx0Y29uc3QgZmlsZW5hbWUgPSBub3JtYWxpemVQYXRoKGAke3BhcmVudC5wYXRofS8ke3RpdGxlfS5tZGApO1xuXHRcdGNvbnN0IGZpbGVfY29udGVudCA9IGAtLS1cbiR7c3RyaW5naWZ5WWFtbChmcm9udF9tYXR0ZXIpfVxuLS0tXG4ke21hcmtkb3dufWA7XG5cdFx0Y29uc3QgZmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVuYW1lKTtcblx0XHRpZiAoZmlsZSAmJiBmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdHRoaXMudmF1bHQubW9kaWZ5KGZpbGUsIGZpbGVfY29udGVudCk7XG5cdFx0XHRyZXR1cm4gZmlsZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIHRoaXMudmF1bHQuY3JlYXRlKGZpbGVuYW1lLCBmaWxlX2NvbnRlbnQpO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGdldE5vdGVCeVRpdGxlKHRpdGxlOiBzdHJpbmcpOiBQcm9taXNlPFRGaWxlIHwgbnVsbD4ge1xuXHRcdHJldHVybiB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGdldExpbmtwYXRoKHRpdGxlKSwgdGhpcy5hcHAudmF1bHQuZ2V0Um9vdCgpLnBhdGgpO1xuXHR9XG5cblx0Z2V0UGFyZW50Rm9sZGVyKCk6IFRGb2xkZXIge1xuXHRcdGNvbnN0IGFjdGl2ZV9maWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRsZXQgcGFyZW50ID0gdGhpcy52YXVsdC5nZXRSb290KCk7XG5cdFx0aWYgKGFjdGl2ZV9maWxlKSB7XG5cdFx0XHRwYXJlbnQgPSB0aGlzLmFwcC5maWxlTWFuYWdlci5nZXROZXdGaWxlUGFyZW50KGFjdGl2ZV9maWxlLnBhdGgpO1xuXHRcdH1cblx0XHRyZXR1cm4gcGFyZW50O1xuXHR9XG5cblx0YXN5bmMgdXBkYXRlTm90ZShmaWxlOiBURmlsZSwgbWFya2Rvd246IHN0cmluZywgbmV3X2Zyb250X21hdHRlcjogYW55KTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgY2FjaGVkX2Zyb250X21hdHRlciA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpLmZyb250bWF0dGVyO1xuXHRcdGNvbnN0IGZyb250X21hdHRlciA9IHsuLi5jYWNoZWRfZnJvbnRfbWF0dGVyLCAuLi5uZXdfZnJvbnRfbWF0dGVyfTtcblx0XHRkZWxldGUgZnJvbnRfbWF0dGVyLnBvc2l0aW9uO1xuXHRcdGNvbnN0IGZpbGVfY29udGVudCA9IGAtLS1cbiR7c3RyaW5naWZ5WWFtbChmcm9udF9tYXR0ZXIpfVxuLS0tXG4ke21hcmtkb3dufWA7XG5cdFx0cmV0dXJuIHRoaXMudmF1bHQubW9kaWZ5KGZpbGUsIGZpbGVfY29udGVudCk7XG5cdH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSx1QkFBNkM7OztBQ0E3Qyx1QkFBNkQ7OztBQ0E3RCxzQkFBK0M7QUFheEMsSUFBTSxtQkFBdUM7QUFBQSxFQUNuRCxVQUFVO0FBQUEsRUFDVixPQUFPO0FBQUEsRUFDUCxZQUFZO0FBQUEsRUFDWixTQUFTO0FBQUEsRUFDVCxjQUFjO0FBQUEsRUFDZCxjQUFjO0FBQ2Y7QUFHTyxJQUFNLGlCQUFOLGNBQTZCLGlDQUFpQjtBQUFBLEVBR3BELFlBQVksS0FBVSxRQUFvQjtBQUN6QyxVQUFNLEtBQUssTUFBTTtBQUNqQixTQUFLLFNBQVM7QUFBQSxFQUNmO0FBQUEsRUFFQSxVQUFnQjtBQUNmLFVBQU0sRUFBQyxnQkFBZTtBQUV0QixnQkFBWSxNQUFNO0FBRWxCLGdCQUFZLFNBQVMsTUFBTSxFQUFDLE1BQU0sb0JBQW1CLENBQUM7QUFFdEQsUUFBSSx3QkFBUSxXQUFXLEVBQ3JCLFFBQVEsb0JBQW9CLEVBQzVCLFFBQVEsK0NBQStDLEVBQ3ZELFFBQVEsVUFBUSxLQUNmLFNBQVMsS0FBSyxPQUFPLFNBQVMsS0FBSyxFQUNuQyxTQUFTLE9BQU8sVUFBVTtBQUMxQixXQUFLLE9BQU8sU0FBUyxRQUFRO0FBQzdCLFlBQU0sS0FBSyxPQUFPLGFBQWE7QUFBQSxJQUNoQyxDQUFDLENBQUM7QUFDSixRQUFJLHdCQUFRLFdBQVcsRUFDckIsUUFBUSxjQUFjLEVBQ3RCLFFBQVEsK0NBQStDLEVBQ3ZE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
